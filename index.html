<!DOCTYPE html>
<html lang="tr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>HAVA UYARI?</title>
    <!-- Site ikonu ve Ana Ekran Logosu -->
<link rel="icon" type="image/png" sizes="32x32" href="WhatsApp-Image-2026-02-20-at-21.34.27-Photoroom.png">
<link rel="apple-touch-icon" sizes="180x180" href="WhatsApp-Image-2026-02-20-at-21.34.27-Photoroom.png">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">

    <style>
        @import url('https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700&display=swap');
        
        :root {
            /* Winter Themes */
            --body-bg-light-winter: url('https://wallpapers.com/images/featured/winter-snow-desktop-9r7xt2hg7jllihbh.jpg');
            --body-overlay-light-winter: linear-gradient(135deg, rgba(30, 60, 114, 0.8) 0%, rgba(42, 82, 152, 0.7) 25%, rgba(116, 185, 255, 0.6) 50%, rgba(9, 132, 227, 0.7) 75%, rgba(108, 92, 231, 0.8) 100%);
            --body-bg-dark-winter: url('https://images.unsplash.com/photo-1531366936337-7c912a4589a7?q=80&w=2070&auto=format&fit=crop');
            --body-overlay-dark-winter: linear-gradient(135deg, rgba(10, 10, 20, 0.85) 0%, rgba(20, 25, 40, 0.8) 100%);
            
            /* Autumn Themes */
            --body-bg-light-autumn: url('https://images.pexels.com/photos/33109/fall-autumn-red-season.jpg?auto=compress&cs=tinysrgb&w=1260&h=750&dpr=1');
            --body-overlay-light-autumn: linear-gradient(135deg, rgba(109, 3, 3, 0.5) 0%, rgba(181, 84, 1, 0.4) 100%);
            --body-bg-dark-autumn: url('https://images.pexels.com/photos/33109/fall-autumn-red-season.jpg?auto=compress&cs=tinysrgb&w=1260&h=750&dpr=1');
            --body-overlay-dark-autumn: linear-gradient(135deg, rgba(40, 10, 0, 0.6) 0%, rgba(80, 40, 10, 0.5) 100%);

            /* Common variables */
            --glass-bg-light: rgba(255, 255, 255, 0.1);
            --glass-border-light: rgba(255, 255, 255, 0.2);
            --text-color-light: white;
            --text-color-muted-light: rgba(255, 255, 255, 0.9);
            --header-gradient-light: linear-gradient(45deg, #fff, #74b9ff, #fff);

            --glass-bg-dark: rgba(10, 10, 20, 0.2);
            --glass-border-dark: rgba(255, 255, 255, 0.1);
            --text-color-dark: #f0f0f0;
            --text-color-muted-dark: rgba(220, 220, 220, 0.9);
            --header-gradient-dark: linear-gradient(45deg, #ddd, #55a3ff, #ddd);
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Poppins', sans-serif;
            background: var(--body-bg) center/cover fixed;
            min-height: 100vh;
            overflow: hidden; /* Dikey kaydƒ±rma √ßubuƒüunu gizler */
            position: relative;
            transition: background 0.5s ease;
        }

        body::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: var(--body-overlay);
            z-index: -1;
            transition: background 0.5s ease;
        }
        
        /* Default state: Dark Winter */
        body {
            --body-bg: var(--body-bg-dark-winter);
            --body-overlay: var(--body-overlay-dark-winter);
            --glass-bg: var(--glass-bg-dark);
            --glass-border: var(--glass-border-dark);
            --text-color: var(--text-color-dark);
            --text-color-muted: var(--text-color-muted-dark);
            --header-gradient: var(--header-gradient-dark);
        }

        body[data-theme="light"] {
            --glass-bg: var(--glass-bg-light);
            --glass-border: var(--glass-border-light);
            --text-color: var(--text-color-light);
            --text-color-muted: var(--text-color-muted-light);
            --header-gradient: var(--header-gradient-light);
        }

        body[data-season="winter"][data-theme="light"] {
            --body-bg: var(--body-bg-light-winter);
            --body-overlay: var(--body-overlay-light-winter);
        }
        body[data-season="winter"][data-theme="dark"] {
            --body-bg: var(--body-bg-dark-winter);
            --body-overlay: var(--body-overlay-dark-winter);
        }
        body[data-season="autumn"][data-theme="light"] {
            --body-bg: var(--body-bg-light-autumn);
            --body-overlay: var(--body-overlay-light-autumn);
        }
        body[data-season="autumn"][data-theme="dark"] {
            --body-bg: var(--body-bg-dark-autumn);
            --body-overlay: var(--body-overlay-dark-autumn);
        }


        /* Effects Container */
        .effects-container {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            pointer-events: none;
            z-index: 1;
        }

        .snowflake {
            position: absolute;
            color: rgba(255, 255, 255, 0.8);
            font-size: 1em;
            animation: snowfall linear infinite;
            text-shadow: 0 0 10px rgba(255, 255, 255, 0.5);
        }

        @keyframes snowfall {
            0% { transform: translateY(-100vh) rotate(0deg); opacity: 0; }
            10% { opacity: 0.8; }
            90% { opacity: 0.8; }
            100% { transform: translateY(100vh) rotate(360deg); opacity: 0; }
        }
        
        .leaf {
            position: absolute;
            font-size: 1.5em;
            animation: leafFall linear infinite;
            text-shadow: 0 0 5px rgba(0, 0, 0, 0.5);
            opacity: 0;
        }
        
        @keyframes leafFall {
            0% {
                transform: translateY(-10vh) rotate(0deg) rotateX(0deg);
                opacity: 0;
            }
            10% {
                opacity: 1;
            }
            100% {
                transform: translateY(110vh) rotate(720deg) rotateX(360deg);
                opacity: 0;
            }
        }

        /* Glassmorphism Effect */
        .glass {
            background: var(--glass-bg);
            backdrop-filter: blur(20px);
            -webkit-backdrop-filter: blur(20px);
            border: 1px solid var(--glass-border);
            box-shadow: 0 15px 35px rgba(0, 0, 0, 0.1);
            border-radius: 20px;
            transition: background 0.5s ease, border 0.5s ease;
        }

        .app-container {
            position: relative;
            z-index: 2;
            height: 100vh;
            display: flex;
            flex-direction: column;
            padding: 20px;
            max-width: 1200px;
            margin: 0 auto;
            overflow-y: auto;
            -ms-overflow-style: none;
            scrollbar-width: none;
        }
        .app-container::-webkit-scrollbar {
            display: none;
        }


        /* Header with 3D Effect */
        .header {
            text-align: center;
            padding: 40px 20px;
            margin-bottom: 30px;
            flex-shrink: 0;
            position: relative; /* Search bar positioning */
        }
        
        .header-content {
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .header-title-container {
            flex-grow: 1;
        }

        .header h1 {
            font-size: 3.5em;
            font-weight: 700;
            background: var(--header-gradient);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            text-shadow: 0 10px 20px rgba(0, 0, 0, 0.3);
            transform: perspective(500px) rotateX(15deg);
            animation: headerFloat 3s ease-in-out infinite;
        }

        @keyframes headerFloat {
            0%, 100% { transform: perspective(500px) rotateX(15deg) translateY(0); }
            50% { transform: perspective(500px) rotateX(15deg) translateY(-10px); }
        }

        .header p {
            font-size: 1.2em;
            color: var(--text-color-muted);
            margin-top: 15px;
            text-shadow: 0 2px 10px rgba(0, 0, 0, 0.3);
        }

        /* --- G√úNCELLENEN ARAMA √áUBUƒûU STƒ∞LLERƒ∞ --- */
        .search-container {
            position: absolute;
            top: 75px; /* A≈ûAƒûIYA ƒ∞NDƒ∞Rƒ∞LDƒ∞ */
            right: 20px;
            z-index: 1000;
            width: 250px;
        }

        .search-input {
            width: 100%;
            padding: 12px 20px;
            border-radius: 30px;
            border: 1px solid rgba(255, 255, 255, 0.3);
            background: rgba(255, 255, 255, 0.15);
            backdrop-filter: blur(10px);
            color: white;
            outline: none;
            font-family: 'Poppins', sans-serif;
            font-size: 1em;
            transition: all 0.3s ease;
            box-shadow: 0 4px 15px rgba(0,0,0,0.1);
        }

        .search-input::placeholder {
            color: rgba(255, 255, 255, 0.8);
        }

        .search-input:focus {
            background: rgba(255, 255, 255, 0.25);
            box-shadow: 0 0 20px rgba(116, 185, 255, 0.3);
            border-color: rgba(116, 185, 255, 0.5);
        }

        .search-results {
            position: absolute;
            top: 110%;
            left: 0;
            width: 100%;
            background: rgba(20, 20, 40, 0.95);
            backdrop-filter: blur(15px);
            border-radius: 15px;
            max-height: 300px;
            overflow-y: auto;
            border: 1px solid rgba(255, 255, 255, 0.1);
            display: none;
            scrollbar-width: thin;
            scrollbar-color: rgba(255, 255, 255, 0.3) transparent;
        }

        .search-result-item {
            padding: 12px 20px;
            color: white;
            cursor: pointer;
            border-bottom: 1px solid rgba(255, 255, 255, 0.05);
            transition: background 0.2s;
            font-size: 0.95em;
        }

        .search-result-item:hover {
            background: rgba(116, 185, 255, 0.2);
        }

        .search-result-item:last-child {
            border-bottom: none;
        }

        .search-result-item small {
            display: block;
            font-size: 0.8em;
            color: rgba(255, 255, 255, 0.6);
        }
        /* --- ARAMA √áUBUƒûU STƒ∞Lƒ∞ SONU --- */

        /* Main Content Grid */
        .main-content {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 30px;
            margin-bottom: 30px;
        }

        /* Alert Section */
        .alert-section {
            padding: 40px;
            text-align: center;
            position: relative;
            overflow: hidden;
        }

        .alert-section::before {
            content: '';
            position: absolute;
            top: -50%;
            left: -50%;
            width: 200%;
            height: 200%;
            background: linear-gradient(45deg, transparent, rgba(255, 255, 255, 0.1), transparent);
            animation: shimmer 3s infinite;
        }

        @keyframes shimmer {
            0% { transform: translateX(-100%) translateY(-100%) rotate(45deg); }
            100% { transform: translateX(100%) translateY(100%) rotate(45deg); }
        }

        .weather-alert-btn {
            background: linear-gradient(45deg, #ff6b6b, #ee5a24, #ff9ff3, #f368e0);
            background-size: 300% 300%;
            color: white;
            border: none;
            padding: 20px 40px;
            font-size: 1.4em;
            font-weight: 600;
            border-radius: 25px;
            cursor: pointer;
            position: relative;
            transform: perspective(1000px) rotateX(0deg);
            transition: all 0.4s cubic-bezier(0.175, 0.885, 0.32, 1.275);
            box-shadow: 
                0 15px 30px rgba(255, 107, 107, 0.4),
                0 5px 15px rgba(0, 0, 0, 0.2),
                inset 0 1px 0 rgba(255, 255, 255, 0.3);
            animation: buttonGradient 3s ease infinite, buttonFloat 2s ease-in-out infinite;
            margin-bottom: 20px;
        }

        @keyframes buttonGradient {
            0%, 100% { background-position: 0% 50%; }
            50% { background-position: 100% 50%; }
        }

        @keyframes buttonFloat {
            0%, 100% { transform: perspective(1000px) rotateX(0deg) translateY(0); }
            50% { transform: perspective(1000px) rotateX(5deg) translateY(-5px); }
        }

        .weather-alert-btn:hover {
            transform: perspective(1000px) rotateX(10deg) translateY(-10px) scale(1.05);
            box-shadow: 
                0 25px 50px rgba(255, 107, 107, 0.6),
                0 15px 25px rgba(0, 0, 0, 0.3),
                inset 0 1px 0 rgba(255, 255, 255, 0.5);
        }

        .weather-alert-btn:disabled {
            opacity: 0.7;
            cursor: not-allowed;
        }

        /* Current Weather Display */
        .current-weather {
            padding: 30px;
            position: relative;
        }

        .weather-icon {
            font-size: 4em;
            text-align: center;
            margin-bottom: 20px;
            text-shadow: 
                0 0 20px rgba(255, 255, 255, 0.8),
                0 5px 10px rgba(0, 0, 0, 0.3);
            animation: iconFloat 4s ease-in-out infinite;
        }

        @keyframes iconFloat {
            0%, 100% { transform: translateY(0) rotate(0deg); }
            25% { transform: translateY(-10px) rotate(5deg); }
            75% { transform: translateY(-5px) rotate(-5deg); }
        }

        .weather-grid {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 20px;
        }

        .weather-item {
            text-align: center;
            padding: 20px;
            background: rgba(255, 255, 255, 0.1);
            border-radius: 15px;
            backdrop-filter: blur(10px);
            transform: perspective(800px) rotateX(0deg);
            transition: all 0.3s ease;
            border: 1px solid rgba(255, 255, 255, 0.2);
        }

        .weather-item:hover {
            transform: perspective(800px) rotateX(10deg) translateY(-5px);
            background: rgba(255, 255, 255, 0.2);
        }

        .weather-item h3 {
            font-size: 0.9em;
            color: var(--text-color-muted);
            margin-bottom: 10px;
            text-transform: uppercase;
            letter-spacing: 1px;
        }

        .weather-item p {
            font-size: 2em;
            font-weight: 700;
            color: var(--text-color);
            text-shadow: 0 2px 10px rgba(0, 0, 0, 0.3);
        }

        /* 5-Day Forecast Section */
        #forecastSection {
            grid-column: 1 / -1;
            padding: 40px;
            margin-top: 20px;
            perspective: 1000px;
        }
        #forecastContainer {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
            gap: 15px;
        }
        .forecast-day-wrapper {
            min-height: 280px;
            position: relative;
            cursor: pointer;
            transform-style: preserve-3d;
            transition: transform 0.8s cubic-bezier(0.175, 0.885, 0.32, 1.275);
        }
        .forecast-day-wrapper.flipped {
            transform: rotateY(180deg);
        }
        .forecast-day, .hourly-forecast-details {
            position: absolute;
            width: 100%;
            height: 100%;
            backface-visibility: hidden;
            -webkit-backface-visibility: hidden;
            background: rgba(255, 255, 255, 0.1);
            border-radius: 15px;
            display: flex;
            flex-direction: column;
        }
        .forecast-day {
            padding: 20px;
            text-align: center;
        }
        .hourly-forecast-details {
            transform: rotateY(180deg);
            padding: 10px;
        }
        .hourly-forecast-details h3 {
            padding: 10px 0;
            flex-shrink: 0;
            text-align: center;
        }
        .hourly-list {
            overflow-y: auto;
            flex-grow: 1;
            -ms-overflow-style: none;
            scrollbar-width: none;
        }
        .hourly-list::-webkit-scrollbar {
            display: none;
        }
        .hourly-item {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 5px;
            font-size: 0.9em;
            border-bottom: 1px solid rgba(255, 255, 255, 0.1);
        }
        .hourly-item:last-child {
            border-bottom: none;
        }
        .hourly-item .icon { font-size: 1.5em; }
        
        .forecast-day h3 {
            font-size: 1.1em;
            color: var(--text-color-muted);
            margin-bottom: 10px;
        }
        .forecast-day .icon {
            font-size: 3em;
            margin: 10px 0;
        }
        .forecast-day .temp {
            font-size: 1.5em;
            font-weight: 600;
            color: var(--text-color);
            margin-bottom: 15px;
        }
        .forecast-details {
            font-size: 0.9em;
            color: var(--text-color-muted);
        }
        .forecast-details p {
            margin-bottom: 5px;
        }


        /* Alert Messages */
        .alert-message {
            margin-top: 15px;
            padding: 20px;
            border-radius: 20px;
            font-weight: 500;
            text-align: center;
            font-size: 1.1em;
            transform: translateY(20px);
            opacity: 0;
            animation: alertSlideIn 0.8s cubic-bezier(0.175, 0.885, 0.32, 1.275) forwards;
            position: relative;
            overflow: hidden;
            border-width: 1px;
            border-style: solid;
        }
        
        /* Persistent Admin Message Style */
        .persistent-alert {
            margin-top: 15px;
            padding: 15px;
            border-radius: 15px;
            font-weight: 500;
            text-align: center;
            font-size: 1.0em;
            border: 1px solid rgba(255, 255, 255, 0.3);
            background: rgba(0, 184, 148, 0.2); /* Hafif ye≈üil/mavi ton */
            color: white;
            backdrop-filter: blur(5px);
            margin-bottom: 20px;
            animation: fadeIn 1s ease-in-out;
            box-shadow: 0 4px 15px rgba(0,0,0,0.1);
        }

        .alert-message.secondary {
             font-size: 1em;
             margin-top: 10px;
             font-weight: 400;
        }

        .alert-message::before {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.2), transparent);
            animation: alertShimmer 2s infinite;
        }

        @keyframes alertSlideIn {
            0% { transform: translateY(20px); opacity: 0; }
            100% { transform: translateY(0); opacity: 1; }
        }

        @keyframes alertShimmer {
            0% { left: -100%; }
            100% { left: 100%; }
        }

        .alert-snow {
            background: rgba(255, 255, 255, 0.8);
            border-color: #fff;
            color: #2d3436;
        }

        .alert-mixed {
            background: rgba(162, 155, 254, 0.8);
            border-color: #a29bfe;
            color: white;
        }

        .alert-rain {
            background: rgba(116, 185, 255, 0.8);
            border-color: #74b9ff;
            color: white;
        }

        .alert-safe {
             background: rgba(0, 184, 148, 0.7);
             border-color: #55efc4;
             color: white;
        }
        
        .alert-info {
             background: rgba(116, 185, 255, 0.5);
             border-color: #74b9ff;
             color: white;
        }

        /* Loading Animation */
        .loading {
            display: inline-block;
            width: 20px;
            height: 20px;
            border: 3px solid rgba(255, 255, 255, 0.3);
            border-radius: 50%;
            border-top-color: #fff;
            animation: spin 1s ease-in-out infinite;
        }
        
        #dewPointPage .loading {
             border-top-color: var(--text-color);
        }

        @keyframes spin {
            to { transform: rotate(360deg); }
        }

        /* User Menu Styles - Modified for No Auth */
        .user-menu {
            display: flex;
            align-items: center;
            gap: 20px;
        }

        /* Sidebar Menu */
        .menu-toggle {
            background: none;
            border: none;
            color: var(--text-color);
            font-size: 2em;
            cursor: pointer;
            padding: 0 15px;
            z-index: 1101;
            transition: transform 0.3s ease;
        }
        .menu-toggle:hover {
            transform: scale(1.1);
        }

        #sidebar {
            position: fixed;
            top: 0;
            left: 0;
            width: 300px;
            height: 100%;
            z-index: 1100;
            transform: translateX(-100%);
            transition: transform 0.4s cubic-bezier(0.23, 1, 0.32, 1);
            padding: 20px;
            display: flex;
            flex-direction: column;
        }

        #sidebar.show {
            transform: translateX(0);
        }
        
        .sidebar-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding-bottom: 20px;
            margin-bottom: 20px;
            border-bottom: 1px solid rgba(255, 255, 255, 0.2);
        }
        
        .sidebar-title {
            color: var(--text-color);
            font-size: 1.5em;
            font-weight: 600;
        }

        .close-btn {
            background: none;
            border: none;
            color: var(--text-color);
            font-size: 2.5em;
            cursor: pointer;
            line-height: 1;
        }

        #sidebar ul {
            list-style: none;
            padding: 0;
            margin: 0;
            flex-grow: 1;
            overflow-y: auto;
            -ms-overflow-style: none;
            scrollbar-width: none;
        }
        #sidebar ul::-webkit-scrollbar {
            display: none;
        }
        
        #sidebar li a {
            display: flex;
            align-items: center;
            gap: 15px;
            padding: 15px 10px;
            color: var(--text-color);
            text-decoration: none;
            font-size: 1.1em;
            border-radius: 10px;
            transition: background 0.3s ease, transform 0.3s ease;
            margin-bottom: 10px;
        }

        #sidebar li a:hover {
            background: rgba(255, 255, 255, 0.2);
            transform: translateX(5px);
        }
        
        #sidebar li a svg {
            width: 24px;
            height: 24px;
            stroke-width: 2;
            stroke: var(--text-color);
        }
        
        /* Theme Toggle Switch */
        .theme-switch-container {
            display: flex;
            align-items: center;
            justify-content: space-between;
            padding: 15px 10px;
            color: var(--text-color);
            font-size: 1.1em;
        }
        .theme-switch {
            position: relative;
            display: inline-block;
            width: 60px;
            height: 34px;
        }
        .theme-switch input { opacity: 0; width: 0; height: 0; }
        .slider {
            position: absolute;
            cursor: pointer;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background-color: #4a4a4a;
            transition: .4s;
            border-radius: 34px;
        }
        .slider:before {
            position: absolute;
            content: "";
            height: 26px;
            width: 26px;
            left: 4px;
            bottom: 4px;
            background-color: white;
            transition: .4s;
            border-radius: 50%;
        }
        
        #themeToggle.slider:before {
             background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='20' height='20' viewBox='0 0 24 24' fill='none' stroke='%23f39c12' stroke-width='2' stroke-linecap='round' stroke-linejoin='round'%3E%3Ccircle cx='12' cy='12' r='5'%3E%3C/circle%3E%3Cline x1='12' y1='1' x2='12' y2='3'%3E%3C/line%3E%3Cline x1='12' y1='21' x2='12' y2='23'%3E%3C/line%3E%3Cline x1='4.22' y1='4.22' x2='5.64' y2='5.64'%3E%3C/line%3E%3Cline x1='18.36' y1='18.36' x2='19.78' y2='19.78'%3E%3C/line%3E%3Cline x1='1' y1='12' x2='3' y2='12'%3E%3C/line%3E%3Cline x1='21' y1='12' x2='23' y2='12'%3E%3C/line%3E%3Cline x1='4.22' y1='19.78' x2='5.64' y2='18.36'%3E%3C/line%3E%3Cline x1='18.36' y1='5.64' x2='19.78' y2='4.22'%3E%3C/line%3E%3C/svg%3E");
            background-repeat: no-repeat;
            background-position: center;
        }
        input:checked + #themeToggle.slider { background-color: #2196F3; }
        input:checked + #themeToggle.slider:before {
            transform: translateX(26px);
            background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='20' height='20' viewBox='0 0 24 24' fill='none' stroke='%23ffffff' stroke-width='2' stroke-linecap='round' stroke-linejoin='round'%3E%3Cpath d='M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z'%3E%3C/path%3E%3C/svg%3E");
        }
        
        #seasonToggle.slider:before {
             background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='20' height='20' viewBox='0 0 24 24' fill='none' stroke='%23d35400' stroke-width='2' stroke-linecap='round' stroke-linejoin='round'%3E%3Cpath d='M2 16.2A5 5 0 0 1 5.2 11h13.6A5 5 0 0 1 22 16.2a5 5 0 0 1-5.2 4.8H5.2A5 5 0 0 1 2 16.2z'%3E%3C/path%3E%3Cpath d='M12 11V3'%3E%3C/path%3E%3Cpath d='m15 6-3-3-3 3'%3E%3C/path%3E%3C/svg%3E");
            background-repeat: no-repeat;
            background-position: center;
        }

        input:checked + #seasonToggle.slider { background-color: #3498db; }
        input:checked + #seasonToggle.slider:before {
            transform: translateX(26px);
            background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='20' height='20' viewBox='0 0 24 24' fill='none' stroke='%23ffffff' stroke-width='2' stroke-linecap='round' stroke-linejoin='round'%3E%3Cpath d='M20 4v10.54a4 4 0 1 1-4 0V4a2 2 0 0 1 4 0Z'%3E%3C/path%3E%3Cpath d='M20 2v2'%3E%3C/path%3E%3Cpath d='M12 10h4'%3E%3C/path%3E%3Cpath d='M12 14h4'%3E%3C/path%3E%3Cpath d='M4 14h4'%3E%3C/path%3E%3Cpath d='M4 18h4'%3E%3C/path%3E%3Cpath d='M4 10h4'%3E%3C/path%3E%3C/svg%3E");
        }

        /* YENƒ∞ EKLENDƒ∞: ƒ∞NDƒ∞R BUTONU VE MODAL STƒ∞LLERƒ∞ */
        .install-app-btn {
            margin-top: 10px;
            margin-bottom: 20px;
            background: linear-gradient(45deg, #0984e3, #74b9ff);
            color: white;
            border: none;
            padding: 12px;
            border-radius: 12px;
            font-weight: 600;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 10px;
            transition: transform 0.2s, box-shadow 0.2s;
            width: 100%;
            font-family: 'Poppins', sans-serif;
            font-size: 1em;
            box-shadow: 0 4px 10px rgba(9, 132, 227, 0.3);
        }
        .install-app-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 6px 15px rgba(9, 132, 227, 0.5);
        }
        .install-app-btn svg {
            stroke: white !important;
        }
        
        .ios-install-modal {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            z-index: 2000;
            background: rgba(0,0,0,0.8);
            backdrop-filter: blur(5px);
            display: none;
            justify-content: center;
            align-items: flex-end; /* iPhone style sheet */
        }
        
        .ios-install-content {
            background: rgba(255,255,255,0.95);
            width: 100%;
            max-width: 500px;
            border-radius: 20px 20px 0 0;
            padding: 30px 20px 40px;
            text-align: center;
            animation: slideUp 0.3s ease-out;
            color: #333;
        }
        
        @keyframes slideUp {
            from { transform: translateY(100%); }
            to { transform: translateY(0); }
        }
        
        .ios-app-icon {
            width: 80px;
            height: 80px;
            border-radius: 18px;
            margin-bottom: 15px;
            box-shadow: 0 5px 15px rgba(0,0,0,0.2);
        }
        
        .ios-step {
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 10px;
            margin: 15px 0;
            font-size: 1.1em;
        }
        
        .share-icon {
            color: #007aff;
            font-size: 1.5em;
        }

        .close-ios-modal {
            position: absolute;
            top: 20px;
            right: 20px;
            font-size: 2em;
            color: #333;
            background: none;
            border: none;
            cursor: pointer;
            line-height: 0.5;
        }

        /* Forecast & Radar Pages */
        .forecast-page, #radarPage, #winterCountdownPage, #summerCountdownPage, #autumnCountdownPage, #springCountdownPage, #adminPage, #altitudePage, #askQuestionPage {
            color: var(--text-color);
        }
        .forecast-page p, #winterCountdownPage p, #summerCountdownPage p, #autumnCountdownPage p, #springCountdownPage p, #adminPage p {
            margin-bottom: 1.2em;
            line-height: 1.6;
            font-size: 1.1em;
        }
        #radarPage {
            display: none;
            padding: 20px;
            margin-top: 20px;
            /* Make it a large responsive square */
            width: 80vh;
            height: 80vh;
            max-width: 90vw;
            max-height: 90vw;
            margin-left: auto;
            margin-right: auto;
        }
        #radarPage iframe {
            border-radius: 15px;
            height: 100%;
            width: 100%;
        }
        #countdownDisplay, #summerCountdownDisplay, #autumnCountdownDisplay, #springCountdownDisplay {
            font-size: 10em;
            font-weight: 700;
            margin: 20px 0;
            text-shadow: 0 5px 25px rgba(0,0,0,0.3);
            animation: pulse 2s infinite ease-in-out;
        }
        
        @keyframes pulse {
            0% { transform: scale(1); text-shadow: 0 5px 25px rgba(0,0,0,0.3); }
            50% { transform: scale(1.05); text-shadow: 0 8px 40px rgba(116, 185, 255, 0.7); }
            100% { transform: scale(1); text-shadow: 0 5px 25px rgba(0,0,0,0.3); }
        }

        /* Dew Point Page Styles */
        #dewPointPage {
            text-align: center;
        }
        .district-list {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 15px;
            margin-top: 20px;
            padding: 10px;
        }
        .district-item {
            background: rgba(0,0,0,0.2);
            padding: 15px;
            border-radius: 10px;
            font-size: 1.1em;
            font-weight: 500;
            text-align: center;
            border: 1px solid var(--glass-border);
            transition: all 0.3s ease;
        }
        .district-item.snow-ready {
            color: #74b9ff;
            font-weight: 700;
            transform: scale(1.05);
            box-shadow: 0 0 15px rgba(116, 185, 255, 0.5);
        }

        @keyframes fadeIn {
            from { opacity: 0; }
            to { opacity: 1; }
        }
        
        /* Admin Panel Styles */
        .admin-stats-container {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 20px;
            margin-top: 30px;
        }
        .admin-stat-card {
            background: rgba(255, 255, 255, 0.1);
            padding: 25px;
            border-radius: 15px;
            text-align: center;
            border: 1px solid var(--glass-border);
        }
        .admin-stat-card h3 {
            font-size: 1.1em;
            margin-bottom: 10px;
            color: var(--text-color-muted);
        }
        .admin-stat-card .count {
            font-size: 3em;
            font-weight: 700;
            color: #74b9ff;
        }

        /* Auth Modal Styles (Y√∂netici Giri≈üi i√ßin) */
        .auth-modal {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100vh;
            display: flex;
            align-items: center;
            justify-content: center;
            z-index: 1000;
            backdrop-filter: blur(10px);
        }

        .auth-wrapper {
            position: relative;
            width: 420px;
            background: var(--glass-bg);
            border: 2px solid var(--glass-border);
            border-radius: 20px;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            backdrop-filter: blur(25px);
            padding: 30px;
        }

        .auth-wrapper h1 {
            font-size: 1.8em;
            color: var(--text-color);
            text-align: center;
            margin-bottom: 1.5rem;
            text-shadow: 0 2px 10px rgba(0,0,0,0.3);
        }

        .auth-wrapper .input-box {
            position: relative;
            width: 100%;
            margin: 20px 0;
            border-bottom: 2px solid rgba(255,255,255,0.6);
        }

        .auth-wrapper .input-box input {
            width: 100%;
            height: 40px;
            background: transparent;
            outline: none;
            border: none;
            font-size: 1em;
            color: var(--text-color);
            padding: 0 40px 0 5px;
        }

        .auth-wrapper .input-box label {
            position: absolute;
            top: 50%;
            left: 5px;
            transform: translateY(-50%);
            font-size: 1em;
            color: var(--text-color-muted);
            pointer-events: none;
            transition: 0.5s;
        }

        .auth-wrapper .input-box input:focus ~ label,
        .auth-wrapper .input-box input:valid ~ label {
            top: -5px;
            font-size: 0.8em;
            color: #74b9ff;
        }

        .auth-wrapper .input-box .icon {
            position: absolute;
            right: 8px;
            font-size: 1.2em;
            line-height: 40px;
        }

        .auth-btn {
            width: 100%;
            height: 45px;
            background: linear-gradient(45deg, #00b894, #00cec9);
            border: none;
            outline: none;
            border-radius: 40px;
            cursor: pointer;
            font-size: 1em;
            font-weight: 600;
            color: white;
            margin-top: 15px;
            transition: all 0.3s ease;
            box-shadow: 0 4px 15px rgba(0, 184, 148, 0.4);
        }
        
        .auth-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 6px 20px rgba(0, 184, 148, 0.6);
        }

        .auth-message {
            margin-top: 15px;
            padding: 10px;
            border-radius: 10px;
            font-weight: 500;
            text-align: center;
            width: 100%;
        }
        .auth-message.error {
            background: rgba(214, 48, 49, 0.3);
            color: #ff6b6b;
            border: 1px solid #d63031;
        }
        
        /* Admin Date Input Styling */
        .admin-date-group {
            display: flex;
            gap: 15px;
            margin-bottom: 15px;
            width: 100%;
        }
        .admin-date-input {
            flex: 1;
            padding: 10px;
            border-radius: 10px;
            border: 1px solid rgba(255,255,255,0.2);
            background: rgba(0,0,0,0.2);
            color: white;
            font-family: 'Poppins', sans-serif;
            color-scheme: dark;
        }
        .admin-date-label {
            display: block;
            margin-bottom: 5px;
            font-size: 0.9em;
            opacity: 0.8;
        }

        /* YENƒ∞ EKLENEN: Rakƒ±m √ñl√ßer Stilleri */
        .altitude-display-container {
            display: flex;
            justify-content: center;
            align-items: center;
            flex-direction: column;
            margin: 40px 0;
        }
        .altitude-circle {
            width: 250px;
            height: 250px;
            border-radius: 50%;
            border: 8px solid rgba(255,255,255,0.2);
            border-top-color: #74b9ff;
            display: flex;
            justify-content: center;
            align-items: center;
            flex-direction: column;
            background: rgba(0,0,0,0.2);
            box-shadow: 0 0 30px rgba(116, 185, 255, 0.3);
            animation: breathe 3s infinite ease-in-out;
            position: relative;
        }
        .altitude-circle::before {
             content: '';
             position: absolute;
             width: 90%;
             height: 90%;
             border-radius: 50%;
             border: 2px dashed rgba(255,255,255,0.1);
             animation: spinSlow 10s linear infinite;
        }
        @keyframes breathe {
            0%, 100% { transform: scale(1); box-shadow: 0 0 30px rgba(116, 185, 255, 0.3); }
            50% { transform: scale(1.02); box-shadow: 0 0 50px rgba(116, 185, 255, 0.5); }
        }
        @keyframes spinSlow {
            from { transform: rotate(0deg); }
            to { transform: rotate(360deg); }
        }
        .altitude-value {
            font-size: 3.5em;
            font-weight: 700;
            color: white;
            text-shadow: 0 0 20px rgba(255,255,255,0.5);
        }
        .altitude-label {
            font-size: 1em;
            color: rgba(255,255,255,0.7);
            margin-top: 5px;
            text-transform: uppercase;
            letter-spacing: 2px;
        }
        .sea-distance-box {
            margin-top: 30px;
            padding: 20px;
            background: rgba(255,255,255,0.1);
            border-radius: 15px;
            width: 100%;
            max-width: 400px;
            text-align: center;
        }

        /* YENƒ∞ EKLENEN: Soru Sor (ƒ∞leti≈üim) Stilleri */
        .question-form-container {
            max-width: 600px;
            margin: 0 auto;
        }
        .form-group {
            margin-bottom: 20px;
        }
        .form-group label {
            display: block;
            margin-bottom: 8px;
            color: var(--text-color-muted);
            font-weight: 500;
        }
        .form-input, .form-select, .form-textarea {
            width: 100%;
            padding: 12px;
            border-radius: 12px;
            background: rgba(0,0,0,0.2);
            border: 1px solid rgba(255,255,255,0.2);
            color: white;
            font-family: 'Poppins', sans-serif;
            font-size: 1em;
            outline: none;
            transition: all 0.3s;
        }
        .form-input:focus, .form-textarea:focus {
            background: rgba(0,0,0,0.3);
            border-color: #74b9ff;
        }
        .user-messages-list {
            margin-top: 30px;
            border-top: 1px solid rgba(255,255,255,0.1);
            padding-top: 20px;
        }
        .user-message-card {
            background: rgba(255,255,255,0.05);
            border-radius: 10px;
            padding: 15px;
            margin-bottom: 15px;
            border-left: 4px solid #74b9ff;
        }
        .admin-reply-box {
            background: rgba(0, 184, 148, 0.1);
            border: 1px solid rgba(0, 184, 148, 0.3);
            border-radius: 8px;
            padding: 10px;
            margin-top: 10px;
            color: #dfe6e9;
            font-size: 0.95em;
        }

        /* Admin Mesaj Kutusu Stilleri */
        .admin-inbox-item {
            background: rgba(0,0,0,0.3);
            padding: 15px;
            border-radius: 12px;
            margin-bottom: 15px;
            border: 1px solid rgba(255,255,255,0.1);
        }
        .inbox-header {
            display: flex;
            justify-content: space-between;
            font-size: 0.85em;
            opacity: 0.7;
            margin-bottom: 8px;
            border-bottom: 1px solid rgba(255,255,255,0.05);
            padding-bottom: 5px;
        }
        .inbox-question {
            font-size: 1.1em;
            margin-bottom: 10px;
            font-weight: 500;
        }
        .reply-input-area {
            display: flex;
            gap: 10px;
            margin-top: 10px;
        }
        .reply-input-area input {
            flex: 1;
            padding: 8px;
            border-radius: 5px;
            border: none;
            background: rgba(255,255,255,0.9);
            color: #333;
        }
        .reply-btn-small {
            background: #00b894;
            color: white;
            border: none;
            padding: 8px 15px;
            border-radius: 5px;
            cursor: pointer;
        }


        @media (max-width: 768px) {
            .main-content {
                grid-template-columns: 1fr;
                gap: 20px;
            }
            .header h1 { font-size: 2.5em; }
            .header-content { flex-direction: column; gap: 10px; }
            .search-container {
                position: relative;
                top: 0;
                right: 0;
                width: 100%;
                margin-top: 15px;
            }
            .weather-alert-btn { font-size: 1.2em; padding: 15px 30px; }
            #countdownDisplay, #summerCountdownDisplay, #autumnCountdownDisplay, #springCountdownDisplay { font-size: 6em; }
            .auth-wrapper {
                width: 90%;
            }
            .admin-date-group {
                flex-direction: column;
                gap: 10px;
            }
            .altitude-circle {
                width: 200px;
                height: 200px;
            }
            .altitude-value {
                font-size: 2.5em;
            }
        }
    </style>
</head>
<body>
    <div class="effects-container" id="effectsContainer"></div>
    
    <div id="adminLoginModal" class="auth-modal" style="display: none;">
        <div class="auth-wrapper glass">
            <form id="adminLoginForm">
                <h1>üõ°Ô∏è Y√∂netici Giri≈üi</h1>
                <div class="input-box">
                    <i class="fas fa-lock icon">üîí</i>
                    <input type="password" id="adminPassword" required>
                    <label>≈ûifre</label>
                </div>
                <button class="auth-btn" type="submit">Gƒ∞Rƒ∞≈û YAP</button>
                <div class="auth-message" id="adminLoginMessage" style="display: none;"></div>
                <button type="button" class="close-btn" style="position: absolute; top: 10px; right: 10px; font-size: 1.5em;" onclick="closeAdminModal()">&times;</button>
            </form>
        </div>
    </div>
    
    <div id="iosInstallModal" class="ios-install-modal">
        <div class="ios-install-content">
            <button class="close-ios-modal" onclick="closeIosInstallModal()">&times;</button>
            <img src="482405075_1174059034309616_1316793753649113220_n.jpg" alt="App Icon" class="ios-app-icon">
            <h3 style="margin-bottom: 10px;">Ana Ekrana Ekle</h3>
            <p>Bu uygulamayƒ± telefonunuza y√ºklemek i√ßin:</p>
            <div class="ios-step">
                1. A≈üaƒüƒ±daki <span class="share-icon">‚éã</span> (Payla≈ü) butonuna basƒ±n.
            </div>
            <div class="ios-step">
                2. <strong>"Ana Ekrana Ekle"</strong> se√ßeneƒüini se√ßin.
            </div>
        </div>
    </div>

    <div class="app-container" id="appContainer">
        <nav id="sidebar" class="glass">
            <div class="sidebar-header">
                <h2 class="sidebar-title">Men√º</h2>
                <button class="close-btn" id="closeMenu">&times;</button>
            </div>
            <ul>
                <li>
                    <a href="#" id="homeLink">
                        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke-linecap="round" stroke-linejoin="round"><path d="m3 9 9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z"/><polyline points="9 22 9 12 15 12 15 22"/></svg>
                        <span>Ana Sayfa</span>
                    </a>
                </li>
                <li>
                    <a href="#" id="altitudeLink">
                        <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="m8 3 4 8 5-5 5 15H2L8 3z"></path></svg>
                        <span>Rakƒ±m & Y√ºkseklik √ñl√ßer</span>
                    </a>
                </li>
                <li>
                    <a href="#" id="askQuestionLink">
                        <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z"></path></svg>
                        <span>Soru Sor (ƒ∞leti≈üim)</span>
                    </a>
                </li>
                <li>
                    <a href="#" id="autumnForecastLink">
                        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke-linecap="round" stroke-linejoin="round"><path d="M11 20A7 7 0 0 1 4 13V7a1 1 0 0 1 1-1h4a1 1 0 0 1 1 1v1.5a.5.5 0 0 0 .5.5h1a.5.5 0 0 0 .5-.5V7a1 1 0 0 1 1-1h4a1 1 0 0 1 1 1v6a7 7 0 0 1-7 7z"/><path d="M12 20v-4"/></svg>
                        <span>Sonbahar Nasƒ±l Ge√ßecek</span>
                    </a>
                </li>
                <li>
                    <a href="#" id="winterForecastLink">
                        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke-linecap="round" stroke-linejoin="round"><path d="M20 4v10.54a4 4 0 1 1-4 0V4a2 2 0 0 1 4 0Z"/><path d="M20 2v2"/><path d="M12 10h4"/><path d="M12 14h4"/><path d="M4 14h4"/><path d="M4 18h4"/><path d="M4 10h4"/></svg>
                        <span>2025-2026 Kƒ±≈üƒ± Nasƒ±l Ge√ßecek</span>
                    </a>
                </li>
                 <li>
                    <a href="#" id="winterCountdownLink">
                        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke-linecap="round" stroke-linejoin="round"><rect x="3" y="4" width="18" height="18" rx="2" ry="2"></rect><line x1="16" y1="2" x2="16" y2="6"></line><line x1="8" y1="2" x2="8" y2="6"></line><line x1="3" y1="10" x2="21" y2="10"></line></svg>
                        <span>Kƒ±≈üa Ne Kadar Kaldƒ±?</span>
                    </a>
                </li>
                <li>
                    <a href="#" id="springCountdownLink">
                        <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M12 2a2.83 2.83 0 0 0-2 5 2.83 2.83 0 0 0 4 0 2.83 2.83 0 0 0-2-5z"/><path d="M12 12a2.83 2.83 0 0 0-2 5 2.83 2.83 0 0 0 4 0 2.83 2.83 0 0 0-2-5z"/><path d="M20 12a2.83 2.83 0 0 0-5 2 2.83 2.83 0 0 0 0 4 2.83 2.83 0 0 0 5-2 2.83 2.83 0 0 0 0-4z"/><path d="M4 12a2.83 2.83 0 0 0-5 2 2.83 2.83 0 0 0 0 4 2.83 2.83 0 0 0 5-2 2.83 2.83 0 0 0 0-4z"/></svg>
                        <span>ƒ∞lkbahara Ka√ß G√ºn Kaldƒ±?</span>
                    </a>
                </li>
                <li>
                    <a href="#" id="summerCountdownLink">
                        <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="5"/><line x1="12" y1="1" x2="12" y2="3"/><line x1="12" y1="21" x2="12" y2="23"/><line x1="4.22" y1="4.22" x2="5.64" y2="5.64"/><line x1="18.36" y1="18.36" x2="19.78" y2="19.78"/><line x1="1" y1="12" x2="3" y2="12"/><line x1="21" y1="12" x2="23" y2="12"/><line x1="4.22" y1="19.78" x2="5.64" y2="18.36"/><line x1="18.36" y1="5.64" x2="19.78" y2="4.22"/></svg>
                        <span>Yaza Ne Kadar Kaldƒ±?</span>
                    </a>
                </li>
                <li>
                    <a href="#" id="autumnCountdownLink">
                        <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M2 16.2A5 5 0 0 1 5.2 11h13.6A5 5 0 0 1 22 16.2a5 5 0 0 1-5.2 4.8H5.2A5 5 0 0 1 2 16.2z"/><path d="M12 11V3"/><path d="m15 6-3-3-3 3"/></svg>
                        <span>Sonbahara Ka√ß G√ºn Kaldƒ±?</span>
                    </a>
                </li>
                 <li> 
                    <a href="#" id="dewPointLink">
                        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round"><path d="M12 2a7 7 0 0 0-7 7c0 3 2 5 7 11 5-6 7-8 7-11a7 7 0 0 0-7-7z"/><circle cx="12" cy="9" r="2.5"/></svg>
                        <span>√áiy Noktasƒ± (Konum)</span>
                    </a>
                </li>
                <li>
                    <a href="#" id="radarLink">
                        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke-linecap="round" stroke-linejoin="round"><path d="M21.21 15.89A10 10 0 1 1 8 2.83"/><path d="M22 12A10 10 0 0 0 12 2v10z"/></svg>
                        <span>ƒ∞stanbul Radar Takip</span>
                    </a>
                </li>
                <li>
                    <a href="#" id="adminLink">
                        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M12 2a2 2 0 0 1 2 2v1a2 2 0 0 1-2 2 2 2 0 0 1-2-2V4a2 2 0 0 1 2-2z"/><path d="M12 17a2 2 0 0 1 2 2v1a2 2 0 0 1-2 2 2 2 0 0 1-2-2v-1a2 2 0 0 1 2-2z"/><path d="M4 12a2 2 0 0 1 2-2h1a2 2 0 0 1 2 2 2 2 0 0 1-2 2H6a2 2 0 0 1-2-2z"/><path d="M17 12a2 2 0 0 1 2-2h1a2 2 0 0 1 2 2 2 2 0 0 1-2 2h-1a2 2 0 0 1-2-2z"/><path d="M4.93 4.93a2 2 0 0 1 2.83 0l.7.7a2 2 0 0 1-2.83 2.83l-.7-.7a2 2 0 0 1 0-2.83z"/><path d="M15.54 15.54a2 2 0 0 1 2.83 0l.7.7a2 2 0 0 1-2.83 2.83l-.7-.7a2 2 0 0 1 0-2.83z"/><path d="M4.93 19.07a2 2 0 0 1 0-2.83l.7-.7a2 2 0 0 1 2.83 2.83l-.7.7a2 2 0 0 1-2.83 0z"/><path d="M15.54 8.46a2 2 0 0 1 0-2.83l.7-.7a2 2 0 0 1 2.83 2.83l-.7.7a2 2 0 0 1-2.83 0z"/></svg>
                        <span>Y√∂netici Paneli</span>
                    </a>
                </li>
                <li>
                    <a href="https://www.instagram.com/istanbul.hava.haberleri/" target="_blank" rel="noopener noreferrer">
                        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke-linecap="round" stroke-linejoin="round"><rect width="20" height="20" x="2" y="2" rx="5" ry="5"/><path d="M16 11.37A4 4 0 1 1 12.63 8 4 4 0 0 1 16 11.37z"/><line x1="17.5" x2="17.51" y1="6.5" y2="6.5"/></svg>
                        <span>ƒ∞stanbul Hava Haberleri</span>
                    </a>
                </li>
                <li>
                    <a href="https://www.instagram.com/hava.uyari/" target="_blank" rel="noopener noreferrer">
                        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke-linecap="round" stroke-linejoin="round"><rect width="20" height="20" x="2" y="2" rx="5" ry="5"/><path d="M16 11.37A4 4 0 1 1 12.63 8 4 4 0 0 1 16 11.37z"/><line x1="17.5" x2="17.51" y1="6.5" y2="6.5"/></svg>
                        <span>Hava Uyarƒ±</span>
                    </a>
                </li>
            </ul>
            
            <button class="install-app-btn" onclick="handleDownloadApp()">
                <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"></path><polyline points="7 10 12 15 17 10"></polyline><line x1="12" y1="15" x2="12" y2="3"></line></svg>
                <span>Uygulamayƒ± ƒ∞ndir</span>
            </button>
            
            <div class="theme-switch-container">
                <span>Mevsim</span>
                 <label class="theme-switch">
                    <input type="checkbox" id="seasonToggle">
                    <span id="seasonToggle" class="slider"></span>
                </label>
            </div>
             <div class="theme-switch-container">
                <span>Tema</span>
                <label class="theme-switch">
                    <input type="checkbox" id="themeToggle">
                    <span id="themeToggle" class="slider"></span>
                </label>
            </div>
        </nav>
        <div class="header">
            <div class="header-content">
                <button class="menu-toggle" id="menuToggle">‚ò∞</button>
                <div class="header-title-container">
                    <h1>‚ùÑÔ∏è <span id="locationTitle">ƒ∞STANBUL</span> HAVA DURUMU</h1>
                    <p>81 ƒ∞l Hava Uyarƒ± Haberleri</p>
                </div>
                <div class="search-container">
                    <input type="text" id="citySearch" class="search-input" placeholder="ƒ∞l veya ƒ∞l√ße Ara..." onkeyup="filterCities()">
                    <div id="searchResults" class="search-results"></div>
                </div>
            </div>
        </div>
        
        <div id="mainWeatherPage">
            <div class="main-content">
                <div class="alert-section glass">
                    <h2 style="color: var(--text-color, white); margin-bottom: 20px; font-size: 1.5em;">üö® Hava Durumu Uyarƒ±sƒ±</h2>
                    
                    <div id="persistentAdminMessage" class="persistent-alert" style="display: none;">
                        </div>

                    <button class="weather-alert-btn" onclick="checkWeatherAlert()">
                        ‚ö†Ô∏è HAVA DURUMU UYARISI
                    </button>
                    <p style="color: var(--text-color-muted, white); font-size: 1.1em;">
                        Konumunuza yakla≈üan yaƒüƒ±≈ülarƒ± kontrol edin
                    </p>
                    <div id="alertContainer"></div>
                </div>

                <div class="current-weather glass">
                    <div class="weather-icon" id="weatherIcon">üå®Ô∏è</div>
                    <h2 style="color: var(--text-color, white); text-align: center; margin-bottom: 20px;">üìç <span id="currentLocationLabel">ƒ∞stanbul</span></h2>
                    <div class="weather-grid">
                        <div class="weather-item">
                            <h3>Sƒ±caklƒ±k</h3>
                            <p id="temperature">-2¬∞C</p>
                        </div>
                        <div class="weather-item">
                            <h3>Nem</h3>
                            <p id="humidity">78%</p>
                        </div>
                        <div class="weather-item">
                            <h3>R√ºzgar</h3>
                            <p id="wind">12 km/h</p>
                        </div>
                        <div class="weather-item">
                            <h3>Yaƒümur ƒ∞htimali</h3>
                            <p id="precipitationChance">%</p>
                        </div>
                    </div>
                </div>
            </div>

            <div id="forecastSection" class="glass">
                 <h2 style="color: var(--text-color, white); text-align: center; margin-bottom: 30px; font-size: 1.8em;">
                    üóìÔ∏è 5 G√ºnl√ºk Hava Tahmini
                </h2>
                <div id="forecastContainer">
                    </div>
            </div>
        </div>
        
        <div id="winterForecastPage" class="glass forecast-page" style="display: none; padding: 40px; margin-top: 20px;">
            <h2 style="text-align: center; margin-bottom: 30px; font-size: 1.8em;">2025-2026 Kƒ±≈üƒ± Nasƒ±l Ge√ßecek?</h2>
            <p>‚ùÑÔ∏è Kutup girdabƒ± (Polar Vortex) soƒüuk hava k√ºtlelerinin kutuplarda hapsolmasƒ±nƒ± saƒülayan devasa atmosferik sistemdir. Ancak bu girdap zayƒ±flayƒ±p par√ßalandƒ±ƒüƒ±nda veya g√ºney enlemlere doƒüru kaydƒ±ƒüƒ±nda, kutup soƒüuklarƒ± aniden T√ºrkiye gibi orta enlem √ºlkelerine inebilir.</p>
            <p>Eƒüer ‚Äúkutup girdabƒ± soƒüuk deposu birikimi √ºst d√ºzeye √ßƒ±karsa‚Äù, yani kutuplarda a≈üƒ±rƒ± soƒüuklar birikir ve bu birikim bir noktada √ß√∂z√ºl√ºp g√ºney enlemlere sarkarsa, ƒ∞stanbul ve T√ºrkiye i√ßin ≈üu sonu√ßlar doƒüabilir:</p>
            <p>üå®Ô∏è 1. Sert ve Ani Soƒüuk Hava Dalgalarƒ±<br>
            ‚Ä¢ Hava birka√ß g√ºn i√ßinde 15-20 derece birden d√º≈üebilir.<br>
            ‚Ä¢ ƒ∞stanbul‚Äôda bile g√ºnd√ºz sƒ±caklƒ±ƒüƒ± 0¬∞C altƒ±na inebilir.</p>
            <p>‚ùÑÔ∏è 2. Kar Yaƒüƒ±≈üƒ± ƒ∞htimali Artar<br>
            ‚Ä¢ Kar sƒ±nƒ±rƒ± deniz seviyesine kadar inebilir.<br>
            ‚Ä¢ ƒ∞stanbul‚Äôda ≈üehir merkezinde yoƒüun kar yaƒüƒ±≈üƒ± g√∂r√ºlebilir.</p>
            <p>üí® 3. ≈ûiddetli R√ºzgar ve Fƒ±rtƒ±na<br>
            ‚Ä¢ Sibirya kaynaklƒ± kuru ve soƒüuk hava, Karadeniz‚Äôden gelen nemle √ßarpƒ±≈ütƒ±ƒüƒ±nda kar fƒ±rtƒ±nalarƒ± olabilir.</p>
            <p>üìâ 4. Uzun S√ºreli Soƒüuklar<br>
            ‚Ä¢ B√∂yle bir kutup girdabƒ± √ß√∂kmesi sonrasƒ± soƒüuklar 1-2 hafta kalƒ±cƒ± olabilir.<br>
            ‚Ä¢ Gece sƒ±caklƒ±klarƒ± ƒ∞stanbul‚Äôda -5¬∞C altƒ±na d√º≈üebilir.</p>
            <p>‚òÉÔ∏è ƒ∞stanbul √∂zelinde bu durum, 2004, 2012, 2017 ve 2022 kƒ±≈ülarƒ±ndaki kar fƒ±rtƒ±nalarƒ±nƒ± hatƒ±rlatabilir. Bu t√ºr kutup k√∂kenli soƒüuklar genellikle Ocak-≈ûubat arasƒ± etkili olur ama bazen Mart ayƒ±nda da g√∂r√ºlebilir.</p>
            <p>üìå Elbette bu tahminler zamanla g√ºncellenecektir ama ≈üuanda g√∂r√ºnen tablo 2022 2017 2012 ye benzer bir kƒ±≈ü ! ‚ùÑÔ∏è‚òÉÔ∏èüå®Ô∏è</p>
        </div>
        
        <div id="autumnForecastPage" class="glass forecast-page" style="display: none; padding: 40px; margin-top: 20px;">
            <h2 style="text-align: center; margin-bottom: 30px; font-size: 1.8em;">Sonbahar Nasƒ±l Ge√ßecek?</h2>
            <p>üçÅSONBAHAR TAHMƒ∞Nƒ∞Mƒ∞ZüçÅ</p>
            <p>‚óèEyl√ºl-Ekim Aylarƒ± Maalesef √ßok sƒ±cak ge√ßecek‚òÄüå§</p>
            <p>‚óèYaƒüƒ±≈ü fazla olmasa da G√∂kg√ºr√ºlt√ºl√º ve kuvvetli yaƒüƒ±≈ülar devam edecek ‚õà‚òî</p>
            <p>KASIM AYI NASIL GE√áECEK ‚Åâüå®ü•∂</p>
            <p>‚óèKasƒ±m Ayƒ± normallerden soƒüuk ge√ßecek ü•∂</p>
            <p>‚óèKasƒ±m ayƒ±nda yaƒüƒ±≈ü ortalamalarda üìäüå®‚ùÑ</p>
            <p>‚óèKasƒ±m ayƒ±nda kar tekrardan erken yaƒüabilir üå®‚òÉ</p>
        </div>
        
        <div id="radarPage" class="glass" style="display: none; padding: 20px; margin-top: 20px;">
             <h2 style="text-align: center; margin-bottom: 20px; font-size: 1.8em;">Windy.com ƒ∞stanbul Radar</h2>
             <iframe width="100%" height="100%" src="https://embed.windy.com/?radar,41.008,28.978,8" frameborder="0"></iframe>
        </div>
        
        <div id="winterCountdownPage" class="glass" style="display: none; padding: 40px; margin-top: 20px; text-align: center;">
            <h2 style="text-align: center; margin-bottom: 20px; font-size: 1.8em;">Kƒ±≈üa Ne Kadar Kaldƒ±?</h2>
            <div id="countdownDisplay"></div>
            <p style="font-size: 1.2em; font-weight: normal;">Biz de KI≈ûI Bekliyoruz, KI≈û Haberleri ƒ∞√ßin ƒ∞STANBUL HAVA HABERLERƒ∞'ni Takip Edin!</p>
        </div>

        <div id="springCountdownPage" class="glass" style="display: none; padding: 40px; margin-top: 20px; text-align: center;">
            <h2 style="text-align: center; margin-bottom: 20px; font-size: 1.8em;">ƒ∞lkbahara Ka√ß G√ºn Kaldƒ±?</h2>
            <div id="springCountdownDisplay"></div>
            <p style="font-size: 1.2em; font-weight: normal;">üå∏ √ái√ßekler a√ßsƒ±n, hava ƒ±sƒ±nsƒ±n!</p>
        </div>
         <div id="summerCountdownPage" class="glass" style="display: none; padding: 40px; margin-top: 20px; text-align: center;">
            <h2 style="text-align: center; margin-bottom: 20px; font-size: 1.8em;">Yaza Ne Kadar Kaldƒ±?</h2>
            <div id="summerCountdownDisplay"></div>
            <p style="font-size: 1.2em; font-weight: normal;">‚òÄÔ∏è G√ºne≈üli g√ºnler yakla≈üƒ±yor!</p>
        </div>
         <div id="autumnCountdownPage" class="glass" style="display: none; padding: 40px; margin-top: 20px; text-align: center;">
            <h2 style="text-align: center; margin-bottom: 20px; font-size: 1.8em;">Sonbahara Ka√ß G√ºn Kaldƒ±?</h2>
            <div id="autumnCountdownDisplay"></div>
            <p style="font-size: 1.2em; font-weight: normal;">üçÅ Yaprak d√∂k√ºm√º ve serin havalar...</p>
        </div>

        <div id="dewPointPage" class="glass forecast-page" style="display: none; padding: 40px; margin-top: 20px; text-align: center;">
            <h2 style="text-align: center; margin-bottom: 30px; font-size: 1.8em;">üå°Ô∏è Konum Bazlƒ± √áiy Noktasƒ±</h2>
            <p id="dewPointMessage" style="font-size: 1.5em; font-weight: 600; margin-bottom: 20px;">Konumunuz alƒ±nƒ±yor... L√ºtfen tarayƒ±cƒ± iznini onaylayƒ±n.</p>
            <p id="dewPointAdvice" style="font-size: 1.8em; font-weight: 700; color: #74b9ff; text-shadow: 0 0 10px #74b9ff;"></p>
            
            <h3 id="districtListTitle" style="display: none; text-align: center; margin-top: 40px; margin-bottom: 20px; font-size: 1.5em;">Diƒüer ƒ∞l√ßeler</h3>
            <div id="districtDewPointList" class="district-list"></div>
        </div>

        <div id="altitudePage" class="glass forecast-page" style="display: none; padding: 40px; margin-top: 20px; text-align: center;">
            <h2 style="text-align: center; margin-bottom: 30px; font-size: 1.8em;">‚õ∞Ô∏è Rakƒ±m & Y√ºkseklik √ñl√ßer</h2>
            
            <p style="margin-bottom: 20px;">GPS verilerini kullanarak anlƒ±k y√ºksekliƒüinizi ve denize olan konumunuzu √∂l√ß√ºn.</p>
            <button class="weather-alert-btn" onclick="calculateAltitude()">KONUMUMU BUL VE √ñL√á</button>
            
            <div class="altitude-display-container" id="altitudeResults" style="display: none;">
                <div class="altitude-circle">
                    <span class="altitude-value" id="altitudeValue">0</span>
                    <span class="altitude-label">METRE</span>
                </div>
                
                <div class="sea-distance-box">
                    <h3>üåä Denize Olan Konum</h3>
                    <p id="seaDistanceText" style="margin-top: 10px; font-size: 1.2em;">Hesaplanƒ±yor...</p>
                    <p id="geoCoords" style="font-size: 0.8em; opacity: 0.6; margin-top: 5px;"></p>
                </div>
            </div>
            <p id="altitudeError" style="color: #ff7675; display: none; margin-top: 20px;"></p>
        </div>

        <div id="askQuestionPage" class="glass forecast-page" style="display: none; padding: 40px; margin-top: 20px;">
            <h2 style="text-align: center; margin-bottom: 30px; font-size: 1.8em;">üì¨ Soru Sor & ƒ∞leti≈üim</h2>
            
            <div class="question-form-container">
                <form id="questionForm" onsubmit="submitQuestion(event)">
                    <div class="form-group">
                        <label for="userName">ƒ∞sminiz Nedir?</label>
                        <input type="text" id="userName" class="form-input" placeholder="Adƒ±nƒ±z" required>
                    </div>
                    
                    <div class="form-group">
                        <label for="targetAdmin">Sorunuzu Kime Sormak ƒ∞stersiniz?</label>
                        <select id="targetAdmin" class="form-select" style="background: rgba(0,0,0,0.2); border: 1px solid rgba(255,255,255,0.2); color: var(--text-color); width: 100%; padding: 12px; border-radius: 12px;">
                            <option value="Hava Uyarƒ±">Hava Uyarƒ±</option>
                            <option value="ƒ∞stanbul Hava Haberleri">ƒ∞stanbul Hava Haberleri</option>
                        </select>
                    </div>

                    <div class="form-group">
                        <label for="userQuestion">Sorunuz</label>
                        <textarea id="userQuestion" class="form-textarea" rows="4" placeholder="Sorunuzu buraya yazƒ±n..." required></textarea>
                    </div>

                    <button type="submit" class="weather-alert-btn" style="width: 100%;">G√ñNDER</button>
                </form>

                <div class="user-messages-list" id="myQuestionsList">
                    <h3 style="text-align: center; margin-bottom: 20px;">G√∂nderdiƒüiniz Sorular</h3>
                    </div>
            </div>
        </div>
        
        <div id="adminPage" class="glass forecast-page" style="display: none; padding: 40px; margin-top: 20px;">
            <h2 style="text-align: center; margin-bottom: 30px; font-size: 1.8em;">üõ°Ô∏è Y√∂netici Paneli</h2>
            
            <div class="admin-control-section" style="margin-top: 30px; border-top: 1px solid rgba(255,255,255,0.2); padding-top: 20px;">
                <h3 style="margin-bottom: 15px;">üì¢ S√ºreli Bilgilendirme Mesajƒ±</h3>
                
                <div class="admin-date-group">
                    <div style="flex:1">
                        <label class="admin-date-label">Ba≈ülangƒ±√ß Tarihi</label>
                        <input type="date" id="adminStartDate" class="admin-date-input">
                    </div>
                    <div style="flex:1">
                        <label class="admin-date-label">Biti≈ü Tarihi</label>
                        <input type="date" id="adminEndDate" class="admin-date-input">
                    </div>
                </div>

                <textarea id="adminAlertInput" placeholder="Buraya yazacaƒüƒ±nƒ±z mesaj ana sayfada belirlediƒüiniz tarihler arasƒ±nda S√úREKLƒ∞ kalacaktƒ±r..." style="width: 100%; padding: 15px; margin-bottom: 15px; border-radius: 10px; border: 1px solid rgba(255,255,255,0.2); background: rgba(0,0,0,0.2); color: white; min-height: 100px; font-family: 'Poppins', sans-serif; resize: vertical;"></textarea>
                <div style="display: flex; gap: 15px;">
                    <button onclick="publishAdminAlert()" class="weather-alert-btn" style="font-size: 1em; padding: 10px 25px; margin: 0; background: linear-gradient(45deg, #00b894, #00cec9);">Yayƒ±nla</button>
                    <button onclick="clearAdminAlert()" class="weather-alert-btn" style="font-size: 1em; padding: 10px 25px; margin: 0; background: linear-gradient(45deg, #d63031, #ff7675);">Yayƒ±ndan Kaldƒ±r</button>
                </div>
                <p id="adminActionStatus" style="margin-top: 15px; font-size: 0.9em; font-weight: 500; min-height: 20px;"></p>
            </div>

            <div class="admin-inbox-section" style="margin-top: 40px; border-top: 1px solid rgba(255,255,255,0.2); padding-top: 20px;">
                <h3 style="margin-bottom: 20px;">üì¨ Gelen Sorular (Hava Uyarƒ± & ƒ∞stanbul Hava Haberleri)</h3>
                <div id="adminInboxList">
                    <p style="text-align: center; opacity: 0.7;">Hen√ºz bir soru gelmemi≈ü.</p>
                </div>
            </div>

            <div class="admin-stats-container">
                <div class="admin-stat-card">
                    <h3>Toplam Ziyaret√ßi Sayƒ±sƒ±</h3>
                    <div class="count" id="visitorCountDisplay">0</div>
                    <p style="font-size: 0.8em; margin-top: 10px; opacity: 0.7;">(Bu tarayƒ±cƒ±daki toplam g√∂r√ºnt√ºlenme)</p>
                </div>
                <div class="admin-stat-card">
                    <h3>Son Ziyaret Tarihi</h3>
                    <div style="font-size: 1.2em; font-weight: 600; color: #fff;" id="lastVisitDisplay">-</div>
                </div>
            </div>
        </div>

    </div>

    <script>
        // API Key
        const API_KEY = "f3bdc6313d3e1a3585a411d5bc4f1eb5";
        
        // --- 81 ƒ∞L VE ƒ∞L√áELERƒ∞ VERƒ∞ TABANI ---
        const turkeyCities = {
            "Adana": ["Seyhan", "Y√ºreƒüir", "√áukurova", "Sarƒ±√ßam", "Ceyhan", "Kozan", "ƒ∞mamoƒülu", "Karata≈ü", "Karaisalƒ±", "Pozantƒ±", "Yumurtalƒ±k", "Tufanbeyli", "Feke", "Aladaƒü", "Saimbeyli"],
            "Adƒ±yaman": ["Merkez", "Kahta", "Besni", "G√∂lba≈üƒ±", "Gerger", "Sincik", "√áelikhan", "Tut", "Samsat"],
            "Afyonkarahisar": ["Merkez", "Sandƒ±klƒ±", "Dinar", "Bolvadin", "Sinanpa≈üa", "Emirdaƒü", "≈ûuhut", "√áay", "ƒ∞hsaniye", "ƒ∞scehisar", "Sultandaƒüƒ±", "√áobanlar", "Dazkƒ±rƒ±", "Ba≈ümak√ßƒ±", "Hocalar", "Bayat", "Evciler", "Kƒ±zƒ±l√∂ren"],
            "Aƒürƒ±": ["Merkez", "Patnos", "Doƒüubayazƒ±t", "Diyadin", "Ele≈ükirt", "Tutak", "Ta≈ülƒ±√ßay", "Hamur"],
            "Aksaray": ["Merkez", "Ortak√∂y", "Eskil", "G√ºlaƒüa√ß", "G√ºzelyurt", "Aƒüa√ß√∂ren", "Sarƒ±yah≈üi"],
            "Amasya": ["Merkez", "Merzifon", "Suluova", "Ta≈üova", "G√ºm√º≈ühacƒ±k√∂y", "G√∂yn√ºcek", "Hamam√∂z√º"],
            "Ankara": ["√áankaya", "Ke√ßi√∂ren", "Yenimahalle", "Mamak", "Etimesgut", "Sincan", "Altƒ±ndaƒü", "Pursaklar", "G√∂lba≈üƒ±", "Polatlƒ±", "√áubuk", "Kahramankazan", "Beypazarƒ±", "Elmadaƒü", "≈ûerefliko√ßhisar", "Akyurt", "Nallƒ±han", "Haymana", "Kƒ±zƒ±lcahamam", "Bala", "Kalecik", "Aya≈ü", "G√ºd√ºl", "√áamlƒ±dere", "Evren"],
            "Antalya": ["Kepez", "Muratpa≈üa", "Alanya", "Manavgat", "Konyaaltƒ±", "Serik", "Aksu", "Kumluca", "D√∂≈üemealtƒ±", "Ka≈ü", "Korkuteli", "Gazipa≈üa", "Finike", "Kemer", "Elmalƒ±", "Demre", "Akseki", "G√ºndoƒümu≈ü", "ƒ∞bradƒ±"],
            "Ardahan": ["Merkez", "G√∂le", "√áƒ±ldƒ±r", "Hanak", "Posof", "Damal"],
            "Artvin": ["Merkez", "Hopa", "Bor√ßka", "Yusufeli", "Arhavi", "≈ûav≈üat", "Ardanu√ß", "Murgul", "Kemalpa≈üa"],
            "Aydƒ±n": ["Efeler", "Nazilli", "S√∂ke", "Ku≈üadasƒ±", "Didim", "√áine", "ƒ∞ncirliova", "Germencik", "Bozdoƒüan", "K√∂≈ük", "Kuyucak", "Sultanhisar", "Karacasu", "Yenipazar", "Buharkent", "Karpuzlu"],
            "Balƒ±kesir": ["Altƒ±eyl√ºl", "Karesi", "Edremit", "Bandƒ±rma", "G√∂nen", "Ayvalƒ±k", "Burhaniye", "Bigadi√ß", "Susurluk", "Dursunbey", "Sƒ±ndƒ±rgƒ±", "ƒ∞vrindi", "Erdek", "Havran", "Kepsut", "Manyas", "Sava≈ütepe", "Balya", "G√∂me√ß", "Marmara"],
            "Bartƒ±n": ["Merkez", "Ulus", "Amasra", "Kuruca≈üile"],
            "Batman": ["Merkez", "Kozluk", "Sason", "Be≈üiri", "Gerc√º≈ü", "Hasankeyf"],
            "Bayburt": ["Merkez", "Demir√∂z√º", "Aydƒ±ntepe"],
            "Bilecik": ["Merkez", "Boz√ºy√ºk", "Osmaneli", "S√∂ƒü√ºt", "G√∂lpazarƒ±", "Pazaryeri", "ƒ∞nhisar", "Yenipazar"],
            "Bing√∂l": ["Merkez", "Gen√ß", "Solhan", "Karlƒ±ova", "Adaklƒ±", "Kiƒüƒ±", "Yedisu", "Yayladere"],
            "Bitlis": ["Tatvan", "Merkez", "G√ºroymak", "Ahlat", "Hizan", "Mutki", "Adilcevaz"],
            "Bolu": ["Merkez", "Gerede", "Mudurnu", "G√∂yn√ºk", "Mengen", "Yeni√ßaƒüa", "D√∂rtdivan", "Seben", "Kƒ±brƒ±scƒ±k"],
            "Burdur": ["Merkez", "Bucak", "G√∂lhisar", "Ye≈üilova", "√áavdƒ±r", "Tefenni", "Karamanlƒ±", "Aƒülasun", "Altƒ±nyayla", "√áeltik√ßi", "Kemer"],
            "Bursa": ["Osmangazi", "Yƒ±ldƒ±rƒ±m", "Nil√ºfer", "ƒ∞neg√∂l", "Gemlik", "Mustafakemalpa≈üa", "Mudanya", "G√ºrsu", "Karacabey", "Orhangazi", "Kestel", "Yeni≈üehir", "ƒ∞znik", "Orhaneli", "Keles", "B√ºy√ºkorhan", "Harmancƒ±k"],
            "√áanakkale": ["Merkez", "Biga", "√áan", "Gelibolu", "Ayvacƒ±k", "Yenice", "Ezine", "Bayrami√ß", "Lapseki", "Eceabat", "G√∂k√ßeada", "Bozcaada"],
            "√áankƒ±rƒ±": ["Merkez", "√áerke≈ü", "Ilgaz", "Orta", "≈ûaban√∂z√º", "Kur≈üunlu", "Yapraklƒ±", "Kƒ±zƒ±lƒ±rmak", "Eldivan", "Atkaracalar", "Korgun", "Bayram√∂ren"],
            "√áorum": ["Merkez", "Sungurlu", "Osmancƒ±k", "ƒ∞skilip", "Alaca", "Bayat", "Mecit√∂z√º", "Kargƒ±", "Ortak√∂y", "Uƒüurludaƒü", "Dodurga", "Oƒüuzlar", "La√ßin", "Boƒüazkale"],
            "Denizli": ["Pamukkale", "Merkezefendi", "√áivril", "Acƒ±payam", "Tavas", "Honaz", "Sarayk√∂y", "Buldan", "Kale", "√áal", "√áameli", "Serinhisar", "Bozkurt", "G√ºney", "√áardak", "Bekilli", "Beyaƒüa√ß", "Babadaƒü", "Baklan"],
            "Diyarbakƒ±r": ["Baƒülar", "Kayapƒ±nar", "Yeni≈üehir", "Sur", "Ergani", "Bismil", "Silvan", "√áƒ±nar", "√áermik", "Dicle", "Kulp", "Hani", "Lice", "Eƒüil", "Hazro", "Kocak√∂y", "√á√ºng√º≈ü"],
            "D√ºzce": ["Merkez", "Ak√ßakoca", "Kayna≈ülƒ±", "G√∂lyaka", "√áilimli", "Yƒ±ƒüƒ±lca", "G√ºm√º≈üova", "Cumayeri"],
            "Edirne": ["Merkez", "Ke≈üan", "Uzunk√∂pr√º", "ƒ∞psala", "Havsa", "Meri√ß", "Enez", "S√ºloƒülu", "Lalapa≈üa"],
            "Elazƒ±ƒü": ["Merkez", "Kovancƒ±lar", "Karako√ßan", "Palu", "Arƒ±cak", "Baskil", "Maden", "Sivrice", "Alacakaya", "Keban", "Aƒüƒ±n"],
            "Erzincan": ["Merkez", "Tercan", "√úz√ºml√º", "√áayƒ±rlƒ±", "ƒ∞li√ß", "Kemah", "Kemaliye", "Otlukbeli", "Refahiye"],
            "Erzurum": ["Yakutiye", "Paland√∂ken", "Aziziye", "Horasan", "Oltu", "Pasinler", "Karayazƒ±", "Hƒ±nƒ±s", "Tekman", "Kara√ßoban", "A≈ükale", "≈ûenkaya", "√áat", "K√∂pr√ºk√∂y", "ƒ∞spir", "Tortum", "Narman", "Uzundere", "Olur", "Pazaryolu"],
            "Eski≈üehir": ["Odunpazarƒ±", "Tepeba≈üƒ±", "Sivrihisar", "√áifteler", "Seyitgazi", "Alpu", "Mihalƒ±√ß√ßƒ±k", "Mahmudiye", "Beylikova", "ƒ∞n√∂n√º", "G√ºny√ºz√º", "Han", "Sarƒ±cakaya", "Mihalgazi"],
            "Gaziantep": ["≈ûahinbey", "≈ûehitkamil", "Nizip", "ƒ∞slahiye", "Nurdaƒüƒ±", "Oƒüuzeli", "Araban", "Yavuzeli", "Karkamƒ±≈ü"],
            "Giresun": ["Merkez", "Bulancak", "Espiye", "G√∂rele", "Tirebolu", "Dereli", "≈ûebinkarahisar", "Ke≈üap", "Yaƒülƒ±dere", "Piraziz", "Eynesil", "Alucra", "√áamoluk", "G√ºce", "Doƒüankent", "√áanak√ßƒ±"],
            "G√ºm√º≈ühane": ["Merkez", "Kelkit", "≈ûiran", "K√ºrt√ºn", "Torul", "K√∂se"],
            "Hakkari": ["Y√ºksekova", "Merkez", "≈ûemdinli", "√áukurca", "Derecik"],
            "Hatay": ["Antakya", "ƒ∞skenderun", "Defne", "D√∂rtyol", "Samandaƒü", "Kƒ±rƒ±khan", "Reyhanlƒ±", "Arsuz", "Altƒ±n√∂z√º", "Hassa", "Payas", "Erzin", "Yayladaƒüƒ±", "Belen", "Kumlu"],
            "Iƒüdƒ±r": ["Merkez", "Tuzluca", "Aralƒ±k", "Karakoyunlu"],
            "Isparta": ["Merkez", "Yalva√ß", "Eƒüirdir", "≈ûarkikaraaƒüa√ß", "Gelendost", "Ke√ßiborlu", "Senirkent", "S√ºt√ß√ºler", "G√∂nen", "Uluborlu", "Atabey", "Aksu", "Yeni≈üarbademli"],
            "ƒ∞stanbul": ["Esenyurt", "K√º√ß√ºk√ßekmece", "Baƒücƒ±lar", "√úmraniye", "Pendik", "Bah√ßelievler", "√úsk√ºdar", "Sultangazi", "Maltepe", "Gaziosmanpa≈üa", "Kartal", "Kadƒ±k√∂y", "Esenler", "Kaƒüƒ±thane", "Fatih", "Avcƒ±lar", "Ba≈üak≈üehir", "Ata≈üehir", "Sancaktepe", "Ey√ºpsultan", "Sarƒ±yer", "Beylikd√ºz√º", "Sultanbeyli", "G√ºng√∂ren", "Zeytinburnu", "≈ûi≈üli", "Bayrampa≈üa", "Arnavutk√∂y", "Tuzla", "√áekmek√∂y", "B√ºy√ºk√ßekmece", "Beykoz", "Beyoƒülu", "Bakƒ±rk√∂y", "Silivri", "Be≈üikta≈ü", "√áatalca", "≈ûile", "Adalar"],
            "ƒ∞zmir": ["Buca", "Karabaƒülar", "Bornova", "Konak", "Kar≈üƒ±yaka", "Bayraklƒ±", "√áiƒüli", "Torbalƒ±", "Menemen", "Gaziemir", "√ñdemi≈ü", "Kemalpa≈üa", "Bergama", "Aliaƒüa", "Menderes", "Tire", "Bal√ßova", "Narlƒ±dere", "Urla", "Kiraz", "Dikili", "√áe≈üme", "Bayƒ±ndƒ±r", "Seferihisar", "Sel√ßuk", "G√ºzelbah√ße", "Fo√ßa", "Kƒ±nƒ±k", "Beydaƒü", "Karaburun"],
            "Kahramanmara≈ü": ["Oniki≈üubat", "Dulkadiroƒülu", "Elbistan", "Af≈üin", "T√ºrkoƒülu", "Pazarcƒ±k", "G√∂ksun", "Andƒ±rƒ±n", "√áaƒülayancerit", "Nurhak", "Ekin√∂z√º"],
            "Karab√ºk": ["Merkez", "Safranbolu", "Yenice", "Eskipazar", "Eflani", "Ovacƒ±k"],
            "Karaman": ["Merkez", "Ermenek", "Sarƒ±veliler", "Ayrancƒ±", "Kazƒ±mkarabekir", "Ba≈üyayla"],
            "Kars": ["Merkez", "Kaƒüƒ±zman", "Sarƒ±kamƒ±≈ü", "Selim", "Digor", "Arpa√ßay", "Akyaka", "Susuz"],
            "Kastamonu": ["Merkez", "Tosya", "Ta≈ük√∂pr√º", "Cide", "ƒ∞nebolu", "Ara√ß", "Devrekani", "Bozkurt", "Daday", "Azdavay", "Pƒ±narba≈üƒ±", "√áatalzeytin", "K√ºre", "Doƒüanyurt", "ƒ∞hsangazi", "≈ûenpazar", "Seydiler", "Han√∂n√º", "Abana", "Aƒülƒ±"],
            "Kayseri": ["Melikgazi", "Kocasinan", "Talas", "Develi", "Yahyalƒ±", "B√ºnyan", "ƒ∞ncesu", "Pƒ±narba≈üƒ±", "Tomarza", "Ye≈üilhisar", "Sarƒ±oƒülan", "Hacƒ±lar", "Sarƒ±z", "Akkƒ±≈üla", "Felahiye", "√ñzvatan"],
            "Kƒ±rƒ±kkale": ["Merkez", "Yah≈üihan", "Keskin", "Delice", "Bah≈üƒ±lƒ±", "Sulakyurt", "Balƒ±≈üeyh", "Karake√ßili", "√áelebi"],
            "Kƒ±rklareli": ["Merkez", "L√ºleburgaz", "Babaeski", "Vize", "Pƒ±narhisar", "Demirk√∂y", "Pehlivank√∂y", "Kof√ßaz"],
            "Kƒ±r≈üehir": ["Merkez", "Kaman", "Mucur", "√ái√ßekdaƒüƒ±", "Akpƒ±nar", "Boztepe", "Ak√ßakent"],
            "Kilis": ["Merkez", "Musabeyli", "Elbeyli", "Polateli"],
            "Kocaeli": ["Gebze", "ƒ∞zmit", "Darƒ±ca", "K√∂rfez", "G√∂lc√ºk", "Derince", "√áayƒ±rova", "Kartepe", "Ba≈üiskele", "Karam√ºrsel", "Kandƒ±ra", "Dilovasƒ±"],
            "Konya": ["Sel√ßuklu", "Meram", "Karatay", "Ereƒüli", "Ak≈üehir", "Bey≈üehir", "√áumra", "Seydi≈üehir", "Ilgƒ±n", "Cihanbeyli", "Kulu", "Karapƒ±nar", "Kadƒ±nhanƒ±", "Saray√∂n√º", "Bozkƒ±r", "Yunak", "Doƒüanhisar", "H√ºy√ºk", "Altƒ±nekin", "Hadim", "√áeltik", "Emirgazi", "Tuzluk√ßu", "Derebucak", "Ak√∂ren", "Halkapƒ±nar", "Yalƒ±h√ºy√ºk", "Ta≈ükent", "G√ºneysƒ±nƒ±r", "Ahƒ±rlƒ±", "Derbent"],
            "K√ºtahya": ["Merkez", "Tav≈üanlƒ±", "Simav", "Gediz", "Emet", "Altƒ±nta≈ü", "Domani√ß", "Hisarcƒ±k", "Aslanapa", "√áavdarhisar", "≈ûaphane", "Pazarlar", "Dumlupƒ±nar"],
            "Malatya": ["Battalgazi", "Ye≈üilyurt", "Doƒüan≈üehir", "Ak√ßadaƒü", "Darende", "Hekimhan", "P√ºt√ºrge", "Yazƒ±han", "Arapgir", "Arguvan", "Kuluncak", "Kale", "Doƒüanyol"],
            "Manisa": ["Yunusemre", "≈ûehzadeler", "Akhisar", "Turgutlu", "Salihli", "Soma", "Ala≈üehir", "Saruhanlƒ±", "Kula", "Kƒ±rkaƒüa√ß", "Demirci", "Sarƒ±g√∂l", "G√∂rdes", "Selendi", "Ahmetli", "G√∂lmarmara", "K√∂pr√ºba≈üƒ±"],
            "Mardin": ["Kƒ±zƒ±ltepe", "Artuklu", "Midyat", "Nusaybin", "Derik", "Mazƒ±daƒüƒ±", "Darge√ßit", "Savur", "Ye≈üilli", "√ñmerli"],
            "Mersin": ["Tarsus", "Toroslar", "Yeni≈üehir", "Akdeniz", "Mezitli", "Erdemli", "Silifke", "Anamur", "Mut", "Bozyazƒ±", "G√ºlnar", "Aydƒ±ncƒ±k", "√áamlƒ±yayla"],
            "Muƒüla": ["Bodrum", "Fethiye", "Milas", "Mente≈üe", "Marmaris", "Seydikemer", "Ortaca", "Yataƒüan", "Dalaman", "K√∂yceƒüiz", "Ula", "Dat√ßa", "Kavaklƒ±dere"],
            "Mu≈ü": ["Merkez", "Bulanƒ±k", "Malazgirt", "Varto", "Hask√∂y", "Korkut"],
            "Nev≈üehir": ["Merkez", "√úrg√ºp", "Avanos", "G√ºl≈üehir", "Derinkuyu", "Acƒ±g√∂l", "Kozaklƒ±", "Hacƒ±bekta≈ü"],
            "Niƒüde": ["Merkez", "Bor", "√áiftlik", "Ulukƒ±≈üla", "Altunhisar", "√áamardƒ±"],
            "Ordu": ["Altƒ±nordu", "√únye", "Fatsa", "Per≈üembe", "Kumru", "Korgan", "G√∂lk√∂y", "Ulubey", "Mesudiye", "Aybastƒ±", "ƒ∞kizce", "Akku≈ü", "G√ºrgentepe", "√áayba≈üƒ±", "Kabata≈ü", "√áama≈ü", "√áatalpƒ±nar", "Kabad√ºz", "G√ºlyalƒ±"],
            "Osmaniye": ["Merkez", "Kadirli", "D√ºzi√ßi", "Bah√ße", "Toprakkale", "Sumbas", "Hasanbeyli"],
            "Rize": ["Merkez", "√áayeli", "Arde≈üen", "Pazar", "Fƒ±ndƒ±klƒ±", "G√ºneysu", "Kalkandere", "ƒ∞yidere", "Derepazarƒ±", "√áamlƒ±hem≈üin", "ƒ∞kizdere", "Hem≈üin"],
            "Sakarya": ["Adapazarƒ±", "Serdivan", "Akyazƒ±", "Erenler", "Hendek", "Karasu", "Geyve", "Arifiye", "Sapanca", "Pamukova", "Ferizli", "Kaynarca", "Kocaali", "S√∂ƒü√ºtl√º", "Karap√ºr√ßek", "Taraklƒ±"],
            "Samsun": ["ƒ∞lkadƒ±m", "Atakum", "Bafra", "√áar≈üamba", "Canik", "Vezirk√∂pr√º", "Terme", "Tekkek√∂y", "Havza", "Ala√ßam", "19 Mayƒ±s", "Ayvacƒ±k", "Kavak", "Salƒ±pazarƒ±", "Asarcƒ±k", "Ladik", "Yakakent"],
            "Siirt": ["Merkez", "Kurtalan", "Pervari", "Baykan", "≈ûirvan", "Eruh", "Tillo"],
            "Sinop": ["Merkez", "Boyabat", "Gerze", "Ayancƒ±k", "Duraƒüan", "T√ºrkeli", "Erfelek", "Dikmen", "Sarayd√ºz√º"],
            "Sivas": ["Merkez", "≈ûarkƒ±≈üla", "Yƒ±ldƒ±zeli", "Su≈üehri", "Gemerek", "Zara", "Kangal", "G√ºr√ºn", "Divriƒüi", "Koyulhisar", "Altƒ±nyayla", "Hafik", "Ula≈ü", "ƒ∞mranlƒ±", "Akƒ±ncƒ±lar", "G√∂lova", "Doƒüan≈üar"],
            "≈ûanlƒ±urfa": ["Eyy√ºbiye", "Haliliye", "Siverek", "Viran≈üehir", "Karak√∂pr√º", "Ak√ßakale", "Suru√ß", "Birecik", "Harran", "Ceylanpƒ±nar", "Bozova", "Hilvan", "Halfeti"],
            "≈ûƒ±rnak": ["Cizre", "Silopi", "Merkez", "ƒ∞dil", "Uludere", "Beyt√º≈ü≈üebap", "G√º√ßl√ºkonak"],
            "Tekirdaƒü": ["√áorlu", "S√ºleymanpa≈üa", "√áerkezk√∂y", "Kapaklƒ±", "Ergene", "Malkara", "Saray", "Hayrabolu", "≈ûark√∂y", "Muratlƒ±", "Marmaraereƒülisi"],
            "Tokat": ["Merkez", "Erbaa", "Turhal", "Niksar", "Zile", "Re≈üadiye", "Almus", "Pazar", "Ba≈ü√ßiftlik", "Ye≈üilyurt", "Artova", "Sulusaray"],
            "Trabzon": ["Ortahisar", "Ak√ßaabat", "Araklƒ±", "Of", "Yomra", "Arsin", "Vakfƒ±kebir", "S√ºrmene", "Ma√ßka", "Be≈üikd√ºz√º", "√áar≈üƒ±ba≈üƒ±", "Tonya", "D√ºzk√∂y", "√áaykara", "≈ûalpazarƒ±", "Hayrat", "K√∂pr√ºba≈üƒ±", "Dernekpazarƒ±"],
            "Tunceli": ["Merkez", "Pertek", "Mazgirt", "√áemi≈ügezek", "Hozat", "Ovacƒ±k", "P√ºl√ºm√ºr", "Nazƒ±miye"],
            "U≈üak": ["Merkez", "Banaz", "E≈üme", "Sivaslƒ±", "Ulubey", "Karahallƒ±"],
            "Van": ["ƒ∞pekyolu", "Erci≈ü", "Tu≈üba", "Edremit", "√ñzalp", "√áaldƒ±ran", "Ba≈ükale", "Muradiye", "G√ºrpƒ±nar", "Geva≈ü", "Saray", "√áatak", "Bah√ßesaray"],
            "Yalova": ["Merkez", "√áiftlikk√∂y", "√áƒ±narcƒ±k", "Altƒ±nova", "Armutlu", "Termal"],
            "Yozgat": ["Merkez", "Sorgun", "Akdaƒümadeni", "Yerk√∂y", "Boƒüazlƒ±yan", "Sarƒ±kaya", "√áekerek", "≈ûefaatli", "Saraykent", "√áayƒ±ralan", "Kadƒ±≈üehri", "Aydƒ±ncƒ±k", "Yenifakƒ±lƒ±", "√áandƒ±r"],
            "Zonguldak": ["Ereƒüli", "Merkez", "√áaycuma", "Devrek", "Kozlu", "Kilimli", "Alaplƒ±", "G√∂k√ßebey"]
        };
        
        let currentCity = "Istanbul"; // Default city

        // Ziyaret√ßi Sayacƒ± Logic (Local Storage tabanlƒ±)
        function updateVisitorStats() {
            let count = localStorage.getItem('site_visits') || 0;
            count = parseInt(count) + 1;
            localStorage.setItem('site_visits', count);
            
            const now = new Date().toLocaleString('tr-TR');
            localStorage.setItem('last_visit', now);
        }
        
        // Sayfa y√ºklendiƒüinde sayacƒ± g√ºncelle
        updateVisitorStats();

        function manageEffects(season) {
            const effectsContainer = document.getElementById('effectsContainer');
            effectsContainer.innerHTML = ''; 

            if (season === 'winter') {
                const snowflakes = ['‚ùÑ', '‚ùÖ', '‚ùÜ', '‚úª', '‚úº', '‚äõ'];
                for (let i = 0; i < 50; i++) {
                    const effectElement = document.createElement('div');
                    effectElement.className = 'snowflake';
                    effectElement.innerHTML = snowflakes[Math.floor(Math.random() * snowflakes.length)];
                    effectElement.style.left = Math.random() * 100 + '%';
                    effectElement.style.animationDuration = (Math.random() * 5 + 5) + 's';
                    effectElement.style.animationDelay = Math.random() * 5 + 's';
                    effectElement.style.fontSize = (Math.random() * 1 + 0.5) + 'em';
                    effectsContainer.appendChild(effectElement);
                }
            } else if (season === 'autumn') {
                const leaves = ['üçÅ', 'üçÇ'];
                 for (let i = 0; i < 50; i++) {
                    const effectElement = document.createElement('div');
                    effectElement.className = 'leaf';
                    effectElement.innerHTML = leaves[Math.floor(Math.random() * leaves.length)];
                    effectElement.style.left = Math.random() * 100 + '%';
                    effectElement.style.animationDuration = (Math.random() * 8 + 7) + 's';
                    effectElement.style.animationDelay = Math.random() * 10 + 's';
                    effectsContainer.appendChild(effectElement);
                }
            }
        }

        // Weather data (simulated for demo - replace with real API calls)
        let weatherData = {
            temperature: Math.floor(Math.random() * 15) - 5,
            humidity: Math.floor(Math.random() * 30) + 60,
            wind: Math.floor(Math.random() * 20) + 5,
            precipitationChance: Math.floor(Math.random() * 100)
        };

        function updateWeatherIcon() {
            const temp = weatherData.temperature;
            const iconElement = document.getElementById('weatherIcon');
            
            if (temp <= 0) {
                iconElement.innerHTML = '‚ùÑÔ∏è';
            } else if (temp <= 3) {
                iconElement.innerHTML = 'üå®Ô∏è';
            } else if (temp <= 10) {
                iconElement.innerHTML = 'üåßÔ∏è';
            } else {
                iconElement.innerHTML = '‚õÖ';
            }
        }

        function updateWeatherDisplay() {
            document.getElementById('temperature').textContent = weatherData.temperature + '¬∞C';
            document.getElementById('humidity').textContent = weatherData.humidity + '%';
            document.getElementById('wind').textContent = weatherData.wind + ' km/h';
            document.getElementById('precipitationChance').textContent = weatherData.precipitationChance + '%';
            updateWeatherIcon();
        }

        async function getRealWeatherData(city = currentCity) {
            try {
                const weatherResponse = await fetch(`https://api.openweathermap.org/data/2.5/weather?q=${city},tr&units=metric&appid=${API_KEY}`);
                if (!weatherResponse.ok) throw new Error("≈ûehir bulunamadƒ±");
                const weatherData = await weatherResponse.json();
                
                const forecastResponse = await fetch(`https://api.openweathermap.org/data/2.5/forecast?q=${city},tr&units=metric&appid=${API_KEY}`);
                const forecastData = await forecastResponse.json();

                const precipitationChance = forecastData.list[0] ? Math.round(forecastData.list[0].pop * 100) : 0;
                
                return {
                    temperature: Math.round(weatherData.main.temp),
                    humidity: weatherData.main.humidity,
                    wind: Math.round(weatherData.wind.speed * 3.6), 
                    precipitationChance: precipitationChance,
                    precipitation: weatherData.weather[0].main.toLowerCase().includes("rain") || weatherData.weather[0].main.toLowerCase().includes("snow"),
                    name: weatherData.name // ≈ûehir adƒ±nƒ± d√∂nd√ºr
                };
            } catch (error) {
                console.log("API'den veri alƒ±namadƒ±, sim√ºle edilmi≈ü veri kullanƒ±lƒ±yor:", error);
                // ≈ûehir bulunamazsa alert verilebilir
                return null;
            }
        }

        // --- YENƒ∞ EKLENEN ARAMA FONKSƒ∞YONLARI ---
        function filterCities() {
            const input = document.getElementById('citySearch');
            const filter = input.value.toLocaleUpperCase('tr-TR');
            const resultsDiv = document.getElementById('searchResults');
            resultsDiv.innerHTML = '';
            
            if (filter.length < 2) {
                resultsDiv.style.display = 'none';
                return;
            }

            let matches = [];

            // ƒ∞lleri ve il√ßeleri tara
            for (const [city, districts] of Object.entries(turkeyCities)) {
                // ƒ∞l e≈üle≈ümesi
                if (city.toLocaleUpperCase('tr-TR').includes(filter)) {
                    matches.push({ name: city, type: 'ƒ∞l', fullName: city });
                }
                
                // ƒ∞l√ße e≈üle≈ümesi
                for (const district of districts) {
                    if (district.toLocaleUpperCase('tr-TR').includes(filter)) {
                        matches.push({ name: district, type: 'ƒ∞l√ße', fullName: `${district}, ${city}` });
                    }
                }
            }
            
            // Sonu√ßlarƒ± sƒ±nƒ±rla (max 10)
            matches = matches.slice(0, 10);

            if (matches.length > 0) {
                matches.forEach(match => {
                    const div = document.createElement('div');
                    div.className = 'search-result-item';
                    div.innerHTML = `<strong>${match.name}</strong><small>${match.type === 'ƒ∞l√ße' ? match.fullName : 'T√ºrkiye'}</small>`;
                    div.onclick = () => selectCity(match.fullName.split(',')[0]); // Sadece il/il√ße adƒ±nƒ± al
                    resultsDiv.appendChild(div);
                });
                resultsDiv.style.display = 'block';
            } else {
                resultsDiv.style.display = 'none';
            }
        }

        function selectCity(cityName) {
            currentCity = cityName;
            
            // Ba≈ülƒ±klarƒ± g√ºncelle
            document.getElementById('locationTitle').textContent = cityName.toLocaleUpperCase('tr-TR');
            document.getElementById('currentLocationLabel').textContent = cityName;
            
            // Arama kutusunu temizle
            document.getElementById('citySearch').value = '';
            document.getElementById('searchResults').style.display = 'none';
            
            // Verileri yenile
            checkCurrentUser();
            
            // T√ºm sayfalarƒ± gizle ve ana sayfayƒ± a√ß
            document.querySelectorAll('.forecast-page, #mainWeatherPage, #radarPage, #winterCountdownPage, #springCountdownPage, #summerCountdownPage, #autumnCountdownPage, #dewPointPage, #adminPage, #altitudePage, #askQuestionPage').forEach(p => p.style.display = 'none');
            document.getElementById('mainWeatherPage').style.display = 'block';
        }

        // Input dƒ±≈üƒ±na tƒ±klayƒ±nca listeyi kapat
        document.addEventListener('click', function(e) {
            const searchContainer = document.querySelector('.search-container');
            if (!searchContainer.contains(e.target)) {
                document.getElementById('searchResults').style.display = 'none';
            }
        });
        // --- ARAMA FONKSƒ∞YONLARI SONU ---

        async function checkWeatherAlert() {
            const button = document.querySelector('.weather-alert-btn');
            const originalText = button.innerHTML;
            
            button.innerHTML = '<div class="loading"></div> Kontrol Ediliyor...';
            button.disabled = true;
            
            try {
                // ≈ûehir dinamik olarak currentCity'den alƒ±nƒ±yor
                const response = await fetch(`https://api.openweathermap.org/data/2.5/forecast?q=${currentCity},tr&units=metric&appid=${API_KEY}`);
                const forecastData = await response.json();
                
                const alertContainer = document.getElementById('alertContainer');
                alertContainer.innerHTML = '';

                const now = new Date().getTime();
                const twelveHoursLater = now + 12 * 60 * 60 * 1000;
                let firstPrecipitationEvent = null;

                for (const item of forecastData.list) {
                    const eventTime = item.dt * 1000;
                    if (eventTime > now && eventTime < twelveHoursLater && item.pop > 0.3) { 
                        firstPrecipitationEvent = item;
                        break;
                    }
                }

                if (firstPrecipitationEvent) {
                    const eventTime = firstPrecipitationEvent.dt * 1000;
                    const minutesToEvent = Math.round((eventTime - now) / (1000 * 60));
                    const temp = Math.round(firstPrecipitationEvent.main.temp);
                    const weatherType = firstPrecipitationEvent.weather[0].main.toLowerCase();
                    const pop = firstPrecipitationEvent.pop;

                    let timeString = "";
                    if (minutesToEvent <= 5) timeString = "her an ba≈ülayabilir";
                    else if (minutesToEvent < 60) timeString = `yakla≈üƒ±k ${minutesToEvent} dakika i√ßinde`;
                    else {
                        const hours = Math.floor(minutesToEvent / 60);
                        const minutes = minutesToEvent % 60;
                        timeString = `yakla≈üƒ±k ${hours} saat ${minutes > 0 ? minutes + ' dakika' : ''} i√ßinde`;
                    }

                    let intensity = "hafif";
                    if (pop > 0.5) intensity = "orta ≈üiddette";
                    if (pop > 0.8) intensity = "yoƒüun";
                    
                    let alertMessage = '';
                    let alertType = '';

                    // --- YENƒ∞ EKLENEN KAR UYARI MANTIƒûI ---
                    if (weatherType.includes('snow') || (weatherType.includes('rain') && temp <= 1)) {
                        alertType = 'snow';
                        
                        if (temp < 0) {
                            alertMessage = `‚ùÑÔ∏è Dƒ∞KKAT! ${timeString} kar yaƒüƒ±≈üƒ± bekleniyor. Kar tutacak ve etraf bembeyaz olacak.`;
                        } else if (temp >= 1) {
                             if (pop > 0.8) { // Yoƒüun kar ve sƒ±caklƒ±k >= 1
                                alertMessage = `‚ùÑÔ∏è Dƒ∞KKAT! ${timeString} yoƒüun kar yaƒüƒ±≈üƒ± bekleniyor. Kƒ±sa s√ºreli ince bir √∂rt√º olu≈üabilir sonra erir.`;
                             } else { // Hafif/Orta kar ve sƒ±caklƒ±k >= 1
                                alertMessage = `‚ùÑÔ∏è Dƒ∞KKAT! ${timeString} kar yaƒüƒ±≈üƒ± bekleniyor. Daha √ßok havada tutmayan kar.`;
                             }
                        } else {
                            // 0 ile 1 arasƒ± (Gap condition fallback) - Genelde tutar
                            alertMessage = `‚ùÑÔ∏è Dƒ∞KKAT! ${timeString} ${intensity} kar yaƒüƒ±≈üƒ± bekleniyor.`;
                        }

                    } else if (weatherType.includes('rain')) {
                        alertMessage = `üåßÔ∏è Dƒ∞KKAT! ${timeString} ${intensity} yaƒümur bekleniyor.`;
                        alertType = 'rain';
                    } else {
                         alertMessage = `üíß Dƒ∞KKAT! ${timeString} ${intensity} yaƒüƒ±≈ü bekleniyor.`;
                         alertType = 'mixed';
                    }
                    
                    showAlert(alertMessage, alertType);

                } else {
                    showAlert(`‚úÖ G√ºvenli! ${currentCity} i√ßin yakƒ±n zamanda yaƒüƒ±≈ü beklenmiyor.`, 'safe');
                    
                    // Check for precipitation in the next 5 days
                    const dailyForecasts = {};
                    forecastData.list.forEach(item => {
                        const date = item.dt_txt.split(' ')[0];
                        if (!dailyForecasts[date]) dailyForecasts[date] = [];
                        dailyForecasts[date].push(item);
                    });
                    
                    let nextPrecipitationDay = null;
                    const today = new Date().toISOString().slice(0, 10);

                    for (const date in dailyForecasts) {
                        if (date === today) continue;
                        const hasPrecipitation = dailyForecasts[date].some(item => item.pop > 0.3);
                        if(hasPrecipitation){
                            const dayData = dailyForecasts[date];
                            const pop = Math.max(...dayData.map(i => i.pop));
                            const temp = Math.min(...dayData.map(i => i.main.temp));
                            const weather = dayData[Math.floor(dayData.length / 2)].weather[0].main.toLowerCase();
                            
                            let intensity = "hafif";
                            if (pop > 0.5) intensity = "orta ≈üiddette";
                            if (pop > 0.8) intensity = "yoƒüun";
                            
                            let type = "yaƒüƒ±≈ü";
                            if(weather.includes('snow') || (weather.includes('rain') && temp <= 1)) type = "kar yaƒüƒ±≈üƒ±";
                            else if (weather.includes('rain')) type = "yaƒümur";

                            nextPrecipitationDay = {
                                day: new Date(date).toLocaleDateString('tr-TR', { weekday: 'long' }),
                                details: `${intensity} ${type}`
                            };
                            break;
                        }
                    }

                    if(nextPrecipitationDay){
                         showAlert(`Ancak, ${nextPrecipitationDay.day} g√ºn√º i√ßin ${nextPrecipitationDay.details} bekleniyor.`, 'info', true);
                    } else {
                        showAlert('√ñn√ºm√ºzdeki 5 g√ºn boyunca da √∂nemli bir yaƒüƒ±≈ü beklenmiyor.', 'info', true);
                    }
                }

            } catch (error) {
                console.error("Hava durumu uyarƒ±sƒ± alƒ±namadƒ±:", error);
                showAlert('‚ùå Hava durumu verileri alƒ±namadƒ±. L√ºtfen tekrar deneyin.', 'error');
            } finally {
                button.innerHTML = originalText;
                button.disabled = false;
            }
        }


        function showAlert(message, type, isSecondary = false) {
            const alertContainer = document.getElementById('alertContainer');
            const alertDiv = document.createElement('div');
            alertDiv.className = `alert-message alert-${type}`;
            if(isSecondary) {
                alertDiv.classList.add('secondary');
            }
            alertDiv.textContent = message;
            alertContainer.appendChild(alertDiv);
            
            setTimeout(() => {
                if (alertDiv.parentNode) {
                    alertDiv.style.opacity = '0';
                    alertDiv.style.transform = 'translateY(-20px)';
                    setTimeout(() => alertDiv.remove(), 500);
                }
            }, 15000);
        }
        
        // --- Y√ñNETƒ∞Cƒ∞ MESAJ FONKSƒ∞YONLARI (G√úNCELLENDƒ∞) ---
        function publishAdminAlert() {
            const text = document.getElementById('adminAlertInput').value;
            const startDate = document.getElementById('adminStartDate').value;
            const endDate = document.getElementById('adminEndDate').value;

            if(text.trim() === "") {
                document.getElementById('adminActionStatus').textContent = "‚ùå L√ºtfen bir mesaj yazƒ±n!";
                document.getElementById('adminActionStatus').style.color = "#ff7675";
                return;
            }
            if(startDate === "" || endDate === "") {
                document.getElementById('adminActionStatus').textContent = "‚ùå L√ºtfen ba≈ülangƒ±√ß ve biti≈ü tarihlerini se√ßin!";
                document.getElementById('adminActionStatus').style.color = "#ff7675";
                return;
            }

            // Veriyi Obje olarak sakla
            const alertData = {
                message: text,
                start: startDate, // YYYY-MM-DD
                end: endDate      // YYYY-MM-DD
            };

            localStorage.setItem('adminAnnouncement', JSON.stringify(alertData));
            
            document.getElementById('adminActionStatus').textContent = "‚úÖ Mesaj ve tarih ayarlandƒ±!";
            document.getElementById('adminActionStatus').style.color = "#55efc4";
            
            // Panoyu hemen g√ºncelle
            checkFixedAdminAlert();
        }
        
        function clearAdminAlert() {
            localStorage.removeItem('adminAnnouncement');
            document.getElementById('adminAlertInput').value = "";
            document.getElementById('adminStartDate').value = "";
            document.getElementById('adminEndDate').value = "";
            document.getElementById('adminActionStatus').textContent = "üóëÔ∏è Mesaj yayƒ±ndan kaldƒ±rƒ±ldƒ±!";
            document.getElementById('adminActionStatus').style.color = "#ffeaa7";
            
            // Panoyu hemen g√ºncelle
            checkFixedAdminAlert();
        }

        // --- SABƒ∞T Y√ñNETƒ∞Cƒ∞ MESAJINI KONTROL ETME FONKSƒ∞YONU ---
        function checkFixedAdminAlert() {
            const alertDataString = localStorage.getItem('adminAnnouncement');
            const messageDiv = document.getElementById('persistentAdminMessage');
            
            if (!alertDataString) {
                messageDiv.style.display = 'none';
                return;
            }

            const alertData = JSON.parse(alertDataString);
            const now = new Date();
            const start = new Date(alertData.start);
            const end = new Date(alertData.end);
            
            // Biti≈ü tarihinin g√ºn sonuna kadar ge√ßerli olmasƒ± i√ßin saati 23:59:59 yapƒ±yoruz
            end.setHours(23, 59, 59, 999);
            // Ba≈ülangƒ±√ß tarihi g√ºn ba≈ülangƒ±cƒ± (00:00) zaten default gelir

            // Tarih Kontrol√º
            if (now >= start && now <= end) {
                messageDiv.innerHTML = `üì¢ <strong>Bƒ∞LGƒ∞LENDƒ∞RME:</strong><br>${alertData.message}`;
                messageDiv.style.display = 'block';
            } else {
                // Tarih aralƒ±ƒüƒ± dƒ±≈üƒ±ndaysa gizle
                messageDiv.style.display = 'none';
            }
        }

        // --- √áƒ∞Y NOKTASI FONKSƒ∞YONLARI ---

        const districtsToShow = [
            { name: "Adalar", lat: 40.87, lon: 29.12 },
            { name: "Bakƒ±rk√∂y", lat: 40.98, lon: 28.87 },
            { name: "Be≈üikta≈ü", lat: 41.04, lon: 29.00 },
            { name: "Beykoz", lat: 41.13, lon: 29.09 },
            { name: "Beyoƒülu", lat: 41.03, lon: 28.97 },
            { name: "B√ºy√ºk√ßekmece", lat: 41.02, lon: 28.58 },
            { name: "√áatalca", lat: 41.34, lon: 28.46 },
            { name: "√áekmek√∂y", lat: 41.03, lon: 29.21 },
            { name: "Esenler", lat: 41.04, lon: 28.89 },
            { name: "Ey√ºp", lat: 41.05, lon: 28.93 },
            { name: "Fatih", lat: 41.01, lon: 28.95 },
            { name: "Kadƒ±k√∂y", lat: 40.99, lon: 29.02 },
            { name: "Kartal", lat: 40.90, lon: 29.19 },
            { name: "Maltepe", lat: 40.92, lon: 29.14 },
            { name: "Pendik", lat: 40.88, lon: 29.23 },
            { name: "Sarƒ±yer", lat: 41.16, lon: 29.05 },
            { name: "Silivri", lat: 41.07, lon: 28.25 },
            { name: "≈ûi≈üli", lat: 41.06, lon: 28.99 },
            { name: "√úsk√ºdar", lat: 41.02, lon: 29.01 },
            { name: "Zeytinburnu", lat: 40.99, lon: 28.90 }
        ];

        function calculateDewPoint(temperature, humidity) {
            const a = 17.625;
            const b = 243.04;
            const alpha = (a * temperature) / (b + temperature) + Math.log(humidity / 100);
            const T_dp = (b * alpha) / (a - alpha);
            return Math.round(T_dp);
        }

        async function fetchDistrictDewPoints() {
            const listEl = document.getElementById('districtDewPointList');
            const titleEl = document.getElementById('districtListTitle');
            listEl.innerHTML = '<div class="loading" style="margin: 20px auto;"></div>';
            titleEl.style.display = 'block';

            try {
                const requests = districtsToShow.map(district =>
                    fetch(`https://api.openweathermap.org/data/2.5/weather?lat=${district.lat}&lon=${district.lon}&units=metric&appid=${API_KEY}`)
                        .then(res => res.json())
                );
                
                const results = await Promise.all(requests);
                
                let listHtml = '';
                results.forEach(data => {
                    const temp = data.main.temp;
                    const humidity = data.main.humidity;
                    const dewPoint = calculateDewPoint(temp, humidity);
                    const isSnowReady = dewPoint < 0;
                    
                    listHtml += `
                        <div class="district-item ${isSnowReady ? 'snow-ready' : ''}">
                            ${data.name}: ${dewPoint}¬∞C
                        </div>
                    `;
                });
                
                listEl.innerHTML = listHtml;

            } catch (error) {
                console.error("ƒ∞l√ße verileri alƒ±namadƒ±:", error);
                listEl.innerHTML = '<p>ƒ∞l√ße verileri y√ºklenirken bir hata olu≈ütu.</p>';
            }
        }

        function getDewPointByLocation() {
            const messageEl = document.getElementById('dewPointMessage');
            const adviceEl = document.getElementById('dewPointAdvice');
            
            messageEl.textContent = 'Konumunuz alƒ±nƒ±yor...';
            adviceEl.textContent = '';
            
            fetchDistrictDewPoints();

            if (!navigator.geolocation) {
                messageEl.textContent = 'Tarayƒ±cƒ±nƒ±z konum servisini desteklemiyor. ƒ∞l√ße listesi y√ºkleniyor...';
                return;
            }

            const successCallback = async (position) => {
                const lat = position.coords.latitude;
                const lon = position.coords.longitude;
                
                try {
                    messageEl.innerHTML = '<div class="loading"></div> Konumunuzun verileri alƒ±nƒ±yor...';
                    const response = await fetch(`https://api.openweathermap.org/data/2.5/weather?lat=${lat}&lon=${lon}&units=metric&appid=${API_KEY}`);
                    const data = await response.json();
                    
                    const temp = data.main.temp;
                    const humidity = data.main.humidity;
                    const locationName = data.name;
                    
                    const dewPoint = calculateDewPoint(temp, humidity);

                    if (dewPoint < 0) {
                        messageEl.textContent = `${locationName} konumunda √ßiy noktasƒ± ≈üu anda ${dewPoint}¬∞C derece.`;
                        adviceEl.textContent = "KAR YAƒûI≈ûINA UYGUN";
                        adviceEl.style.color = "#74b9ff";
                    } else {
                        messageEl.textContent = `${locationName} konumunda √ßiy noktasƒ± derecesi ${dewPoint}¬∞C.`;
                        adviceEl.textContent = "";
                    }

                } catch (error) {
                    console.error("√áiy noktasƒ± verisi alƒ±namadƒ±:", error);
                    messageEl.textContent = 'Veri alƒ±nƒ±rken bir hata olu≈ütu.';
                }
            };

            const errorCallback = (error) => {
                if (error.code == error.PERMISSION_DENIED) {
                    messageEl.textContent = "Konum izni vermediniz. Diƒüer il√ßeler listeleniyor.";
                } else {
                    messageEl.textContent = "Konumunuza ula≈üƒ±lamadƒ±. Diƒüer il√ßeler listeleniyor.";
                }
            };

            navigator.geolocation.getCurrentPosition(successCallback, errorCallback);
        }

        // --- RAKIM & Y√úKSEKLƒ∞K HESAPLAMA ---
        async function calculateAltitude() {
            const resultsDiv = document.getElementById('altitudeResults');
            const valDisplay = document.getElementById('altitudeValue');
            const seaDistDisplay = document.getElementById('seaDistanceText');
            const geoCoordsDisplay = document.getElementById('geoCoords');
            const errorDisplay = document.getElementById('altitudeError');
            
            errorDisplay.style.display = 'none';
            resultsDiv.style.display = 'none';
            
            if (!navigator.geolocation) {
                errorDisplay.textContent = "Tarayƒ±cƒ±nƒ±z konum servislerini desteklemiyor.";
                errorDisplay.style.display = "block";
                return;
            }
            
            const btn = document.querySelector('#altitudePage button');
            btn.innerHTML = '<div class="loading"></div> Hesaplanƒ±yor...';
            btn.disabled = true;
            
            navigator.geolocation.getCurrentPosition(async (position) => {
                const lat = position.coords.latitude;
                const lon = position.coords.longitude;
                
                try {
                    // Open-Meteo Elevation API (√úcretsiz)
                    const response = await fetch(`https://api.open-meteo.com/v1/elevation?latitude=${lat}&longitude=${lon}`);
                    const data = await response.json();
                    
                    if(data.elevation && data.elevation.length > 0) {
                        const elevation = Math.round(data.elevation[0]);
                        valDisplay.textContent = elevation;
                        resultsDiv.style.display = 'flex';
                        
                        // Denize uzaklƒ±k i√ßin basit sim√ºlasyon 
                        // (Ger√ßek kƒ±yƒ± verisi olmadan tam mesafe zordur, bu y√ºzden rakƒ±ma g√∂re yorumluyoruz)
                        geoCoordsDisplay.textContent = `Lat: ${lat.toFixed(4)}, Lon: ${lon.toFixed(4)}`;
                        
                        if(elevation < 10) {
                             seaDistDisplay.textContent = "Deniz seviyesine √ßok yakƒ±nsƒ±nƒ±z (Kƒ±yƒ± ≈üeridi).";
                        } else if (elevation < 50) {
                             seaDistDisplay.textContent = "Denize yakƒ±n, al√ßak bir konumdasƒ±nƒ±z.";
                        } else if (elevation < 150) {
                             seaDistDisplay.textContent = "Denizden y√ºksek, orta rakƒ±mlƒ± bir tepedesiniz.";
                        } else {
                             seaDistDisplay.textContent = "Denizden olduk√ßa y√ºksek ve uzak bir konumdasƒ±nƒ±z.";
                        }
                    } else {
                        throw new Error("Veri alƒ±namadƒ±");
                    }
                    
                } catch (err) {
                    console.error(err);
                    errorDisplay.textContent = "Y√ºkseklik verisi alƒ±namadƒ±. L√ºtfen internet baƒülantƒ±nƒ±zƒ± kontrol edin.";
                    errorDisplay.style.display = "block";
                } finally {
                    btn.innerHTML = 'KONUMUMU BUL VE √ñL√á';
                    btn.disabled = false;
                }
                
            }, (err) => {
                btn.innerHTML = 'KONUMUMU BUL VE √ñL√á';
                btn.disabled = false;
                errorDisplay.textContent = "Konum izni reddedildi. L√ºtfen konum izni verin.";
                errorDisplay.style.display = "block";
            });
        }
        
        // --- ƒ∞LETƒ∞≈ûƒ∞M & SORU SORMA Sƒ∞STEMƒ∞ (LocalStorage Tabanlƒ±) ---
        
        // Soruyu Kaydet
        function submitQuestion(e) {
            e.preventDefault();
            
            const name = document.getElementById('userName').value;
            const target = document.getElementById('targetAdmin').value;
            const question = document.getElementById('userQuestion').value;
            
            if(!name || !question) return;
            
            const newQuestion = {
                id: Date.now(),
                user: name,
                target: target,
                question: question,
                reply: null, // Admin cevabƒ± buraya gelecek
                date: new Date().toLocaleString('tr-TR')
            };
            
            // Mevcut sorularƒ± al
            let questions = JSON.parse(localStorage.getItem('site_questions')) || [];
            questions.push(newQuestion);
            localStorage.setItem('site_questions', JSON.stringify(questions));
            
            // Formu temizle
            document.getElementById('userQuestion').value = '';
            alert("Sorunuz ba≈üarƒ±yla iletildi! Y√∂neticilerimiz en kƒ±sa s√ºrede cevaplayacaktƒ±r.");
            
            // Listeyi g√ºncelle
            loadUserQuestions();
            
            // Eƒüer admin panelindeysek orayƒ± da g√ºncelle (canlƒ±lƒ±k hissi i√ßin)
            loadAdminInbox();
        }
        
        // Kullanƒ±cƒ±nƒ±n Sorularƒ±nƒ± Listele
        function loadUserQuestions() {
            const container = document.getElementById('myQuestionsList');
            const questions = JSON.parse(localStorage.getItem('site_questions')) || [];
            
            // Sadece bu tarayƒ±cƒ±da sorulanlarƒ± g√∂steriyoruz (basitlik i√ßin filtreleme yapmƒ±yoruz, hepsi bu cihazdan sorulmu≈ü kabul ediyoruz)
            // Ters sƒ±rala (en yeni en √ºstte)
            const myQuestions = questions.sort((a,b) => b.id - a.id);
            
            if(myQuestions.length === 0) {
                container.innerHTML = '<p style="text-align: center; opacity: 0.7;">Hen√ºz sorunuz yok.</p>';
                return;
            }
            
            let html = '<h3 style="text-align: center; margin-bottom: 20px;">Ge√ßmi≈ü Sorularƒ±nƒ±z</h3>';
            
            myQuestions.forEach(q => {
                html += `
                    <div class="user-message-card">
                        <div style="display:flex; justify-content:space-between; font-size:0.8em; opacity:0.7; margin-bottom:5px;">
                            <span>Kime: ${q.target}</span>
                            <span>${q.date}</span>
                        </div>
                        <p style="font-weight:500;">${q.question}</p>
                        ${q.reply ? `<div class="admin-reply-box"><strong>üë®‚Äçüíº Y√∂netici Cevabƒ±:</strong><br>${q.reply}</div>` : '<div style="margin-top:10px; font-size:0.85em; color:#fab1a0;">‚è≥ Cevap bekleniyor...</div>'}
                    </div>
                `;
            });
            
            container.innerHTML = html;
        }

        // Admin Gelen Kutusu (Inbox)
        function loadAdminInbox() {
            const container = document.getElementById('adminInboxList');
            const questions = JSON.parse(localStorage.getItem('site_questions')) || [];
            
            // Cevaplanmamƒ±≈ülarƒ± veya hepsini g√∂ster (En yeni en √ºstte)
            const sortedQuestions = questions.sort((a,b) => b.id - a.id);
            
            if(sortedQuestions.length === 0) {
                container.innerHTML = '<p style="text-align: center; opacity: 0.7;">Hen√ºz bir soru gelmemi≈ü.</p>';
                return;
            }
            
            let html = '';
            
            sortedQuestions.forEach(q => {
                html += `
                    <div class="admin-inbox-item">
                        <div class="inbox-header">
                            <span>G√∂nderen: <strong>${q.user}</strong></span>
                            <span>Hedef: ${q.target}</span>
                            <span>${q.date}</span>
                        </div>
                        <div class="inbox-question">${q.question}</div>
                        
                        ${q.reply ? 
                            `<div style="color:#00b894; font-size:0.9em; margin-top:5px;">‚úÖ Cevaplandƒ±: ${q.reply}</div>` : 
                            `<div class="reply-input-area">
                                <input type="text" id="replyInput-${q.id}" placeholder="Cevabƒ±nƒ±zƒ± yazƒ±n...">
                                <button class="reply-btn-small" onclick="adminReply(${q.id})">Cevapla</button>
                            </div>`
                        }
                    </div>
                `;
            });
            
            container.innerHTML = html;
        }
        
        // Admin Cevaplama Fonksiyonu
        function adminReply(questionId) {
            const replyText = document.getElementById(`replyInput-${questionId}`).value;
            if(!replyText) return alert("L√ºtfen bir cevap yazƒ±n.");
            
            let questions = JSON.parse(localStorage.getItem('site_questions')) || [];
            const qIndex = questions.findIndex(q => q.id === questionId);
            
            if(qIndex > -1) {
                questions[qIndex].reply = replyText;
                localStorage.setItem('site_questions', JSON.stringify(questions));
                alert("Cevap g√∂nderildi!");
                loadAdminInbox(); // Listeyi yenile
            }
        }

        async function checkCurrentUser() {
            // Dinamik currentCity ile veri √ßekme
            const realData = await getRealWeatherData(currentCity);
            if (realData) {
                weatherData = realData;
                updateWeatherDisplay();
                
                // Ba≈ülƒ±ƒüƒ± g√ºncelle
                if(realData.name) {
                    document.getElementById('currentLocationLabel').textContent = realData.name;
                }
            }
            getAndDisplayForecast(currentCity);
            
            // YENƒ∞: Sabit y√∂netici mesajƒ±nƒ± kontrol et
            checkFixedAdminAlert();
        }
        
        // Theme Toggler
        function setupThemeToggler() {
            const themeToggle = document.getElementById('themeToggle');
            const currentTheme = localStorage.getItem('theme') || 'dark';
            
            document.body.setAttribute('data-theme', currentTheme);
            themeToggle.checked = currentTheme === 'dark';

            themeToggle.addEventListener('change', function() {
                const theme = this.checked ? 'dark' : 'light';
                localStorage.setItem('theme', theme);
                document.body.setAttribute('data-theme', theme);
            });
        }
        
        // Season Toggler
        function setupSeasonToggler() {
            const seasonToggle = document.getElementById('seasonToggle');
            const currentSeason = localStorage.getItem('season') || 'winter';
            
            document.body.setAttribute('data-season', currentSeason);
            seasonToggle.checked = currentSeason === 'winter';
            manageEffects(currentSeason);

            seasonToggle.addEventListener('change', function() {
                const season = this.checked ? 'winter' : 'autumn';
                localStorage.setItem('season', season);
                document.body.setAttribute('data-season', season);
                manageEffects(season);
            });
        }
        
        // 5-Day Forecast Functions
        function getWeatherEmoji(iconCode) {
            const iconMap = {
                '01d': '‚òÄÔ∏è', '01n': 'üåô',
                '02d': '‚õÖÔ∏è', '02n': '‚òÅÔ∏è',
                '03d': '‚òÅÔ∏è', '03n': '‚òÅÔ∏è',
                '04d': '‚òÅÔ∏è', '04n': '‚òÅÔ∏è',
                '09d': 'üåßÔ∏è', '09n': 'üåßÔ∏è',
                '10d': 'üå¶Ô∏è', '10n': 'üåßÔ∏è',
                '11d': '‚õàÔ∏è', '11n': '‚õàÔ∏è',
                '13d': '‚ùÑÔ∏è', '13n': '‚ùÑÔ∏è',
                '50d': 'üå´Ô∏è', '50n': 'üå´Ô∏è',
            };
            return iconMap[iconCode] || '‚ùì';
        }

        async function getAndDisplayForecast(city = currentCity) {
            const forecastContainer = document.getElementById('forecastContainer');
            try {
                const response = await fetch(`https://api.openweathermap.org/data/2.5/forecast?q=${city},tr&units=metric&appid=${API_KEY}`);
                const data = await response.json();
                
                const dailyForecasts = {};
                data.list.forEach(item => {
                    const date = item.dt_txt.split(' ')[0];
                    if (!dailyForecasts[date]) {
                        dailyForecasts[date] = { items: [] };
                    }
                    dailyForecasts[date].items.push(item);
                });

                forecastContainer.innerHTML = '';
                const today = new Date().toISOString().slice(0, 10);
                let daysDisplayed = 0;

                for (const date in dailyForecasts) {
                    if (date === today) continue;
                    if (daysDisplayed >= 5) break;

                    const dayData = dailyForecasts[date];
                    const minTemp = Math.round(Math.min(...dayData.items.map(i => i.main.temp)));
                    const maxTemp = Math.round(Math.max(...dayData.items.map(i => i.main.temp)));
                    const avgHumidity = Math.round(dayData.items.reduce((sum, i) => sum + i.main.humidity, 0) / dayData.items.length);
                    const maxWind = Math.round(Math.max(...dayData.items.map(i => i.wind.speed)) * 3.6);
                    const maxPrecipitation = Math.round(Math.max(...dayData.items.map(i => i.pop)) * 100);
                    const icon = dayData.items[Math.floor(dayData.items.length / 2)].weather[0].icon;
                    const forecastDate = new Date(date);
                    const dayName = forecastDate.toLocaleDateString('tr-TR', { weekday: 'long' });

                    const wrapper = document.createElement('div');
                    wrapper.className = 'forecast-day-wrapper';
                    
                    const front = document.createElement('div');
                    front.className = 'forecast-day';
                    front.innerHTML = `
                        <h3>${dayName}</h3>
                        <div class="icon">${getWeatherEmoji(icon)}</div>
                        <div class="temp">${maxTemp}¬∞ / ${minTemp}¬∞</div>
                        <div class="forecast-details">
                            <p>üíß ${avgHumidity}%</p>
                            <p>üí® ${maxWind} km/h</p>
                            <p>‚òîÔ∏è ${maxPrecipitation}%</p>
                        </div>
                    `;
                    
                    const back = document.createElement('div');
                    back.className = 'hourly-forecast-details';
                    
                    let hourlyItemsHtml = '';
                    dayData.items.forEach(item => {
                        const time = item.dt_txt.split(' ')[1].substring(0, 5);
                        hourlyItemsHtml += `
                            <div class="hourly-item">
                                <span>${time}</span>
                                <span class="icon">${getWeatherEmoji(item.weather[0].icon)}</span>
                                <span>${Math.round(item.main.temp)}¬∞</span>
                                <span>üíß${item.main.humidity}%</span>
                                <span>üí®${Math.round(item.wind.speed * 3.6)}</span>
                            </div>
                        `;
                    });
                    back.innerHTML = `<h3>${dayName} Detaylarƒ±</h3><div class="hourly-list">${hourlyItemsHtml}</div>`;

                    wrapper.appendChild(front);
                    wrapper.appendChild(back);
                    
                    wrapper.addEventListener('click', () => {
                        wrapper.classList.toggle('flipped');
                    });

                    forecastContainer.appendChild(wrapper);
                    daysDisplayed++;
                }

            } catch (error) {
                console.error("Hava tahmini alƒ±namadƒ±:", error);
                forecastContainer.innerHTML = '<p style="color: var(--text-color, white);">Tahmin verileri y√ºklenemedi.</p>';
            }
        }
        
        // --- MEVSƒ∞M SAYA√á FONKSƒ∞YONLARI ---

        function calculateDaysUntilSeason(targetMonth, targetDay) {
            const now = new Date();
            let targetDate = new Date(now.getFullYear(), targetMonth, targetDay);
            if (now > targetDate) {
                targetDate.setFullYear(now.getFullYear() + 1);
            }
            const diffTime = targetDate - now;
            return Math.ceil(diffTime / (1000 * 60 * 60 * 24));
        }

        function calculateDaysUntilWinter() {
            return calculateDaysUntilSeason(11, 1); // 1 Aralƒ±k
        }
        function calculateDaysUntilSpring() {
            return calculateDaysUntilSeason(2, 21); // 21 Mart (ay 2)
        }
        function calculateDaysUntilSummer() {
            return calculateDaysUntilSeason(5, 21); // 21 Haziran (ay 5)
        }
        function calculateDaysUntilAutumn() {
            return calculateDaysUntilSeason(8, 23); // 23 Eyl√ºl (ay 8)
        }
        
        // Admin Giri≈ü ƒ∞≈ülemleri
        const adminLoginModal = document.getElementById('adminLoginModal');
        const adminLoginForm = document.getElementById('adminLoginForm');
        const adminLoginMessage = document.getElementById('adminLoginMessage');

        function openAdminModal() {
            adminLoginModal.style.display = 'flex';
            document.getElementById('adminPassword').value = '';
            adminLoginMessage.style.display = 'none';
        }

        function closeAdminModal() {
            adminLoginModal.style.display = 'none';
        }
        
        adminLoginForm.addEventListener('submit', function(e) {
            e.preventDefault();
            const password = document.getElementById('adminPassword').value;
            
            if(password === "Baran_768208") {
                closeAdminModal();
                // Admin sayfasƒ±na y√∂nlendir (Burada showPage fonksiyonunu kullanƒ±yoruz)
                const adminPage = document.getElementById('adminPage');
                // Sayfalarƒ± gizle ve admin sayfasƒ±nƒ± g√∂ster (Bu i≈ülemi global scope'tan yapƒ±yoruz)
                document.querySelectorAll('.forecast-page, #mainWeatherPage, #radarPage, #winterCountdownPage, #springCountdownPage, #summerCountdownPage, #autumnCountdownPage, #altitudePage, #askQuestionPage').forEach(p => p.style.display = 'none');
                document.getElementById('adminPage').style.display = 'block';
                document.getElementById('sidebar').classList.remove('show');
                
                // Admin verilerini g√ºncelle
                document.getElementById('visitorCountDisplay').textContent = localStorage.getItem('site_visits') || 0;
                document.getElementById('lastVisitDisplay').textContent = localStorage.getItem('last_visit') || 'Hen√ºz Yok';
                
                // Kayƒ±tlƒ± admin mesaj verilerini getir
                const savedData = localStorage.getItem('adminAnnouncement');
                if(savedData) {
                    const data = JSON.parse(savedData);
                    document.getElementById('adminAlertInput').value = data.message;
                    document.getElementById('adminStartDate').value = data.start;
                    document.getElementById('adminEndDate').value = data.end;
                }

                // Gelen kutusunu y√ºkle
                loadAdminInbox();
            } else {
                adminLoginMessage.textContent = "Hatalƒ± ≈üifre!";
                adminLoginMessage.className = "auth-message error";
                adminLoginMessage.style.display = 'block';
            }
        });

        // --- ƒ∞NDƒ∞RME BUTONU ƒ∞≈ûLEVƒ∞ ---
        function handleDownloadApp() {
            const userAgent = navigator.userAgent || navigator.vendor || window.opera;
            const isAndroid = /android/i.test(userAgent);
            const isIOS = /iPad|iPhone|iPod/.test(userAgent) && !window.MSStream;

            if (isAndroid) {
                const link = document.createElement('a');
                link.href = '#'; 
                link.download = 'IstanbulHavaDurumu.apk';
                document.body.appendChild(link);
                document.body.removeChild(link);
                alert("üì• ƒ∞stanbul Hava Durumu APK dosyasƒ± indiriliyor...");
            } else if (isIOS) {
                document.getElementById('iosInstallModal').style.display = 'flex';
            } else {
                alert("Bu √∂zellik sadece mobil cihazlar (Android ve iOS) i√ßin optimize edilmi≈ütir.");
            }
        }
        
        function closeIosInstallModal() {
            document.getElementById('iosInstallModal').style.display = 'none';
        }

        // Initialize app
        document.addEventListener('DOMContentLoaded', function() {
            setupThemeToggler();
            setupSeasonToggler();
            
            // Hava durumu ve ilk verileri intro ekranƒ± olmadan direkt √ßaƒüƒ±r
            checkCurrentUser();
            
            if ("Notification" in window && Notification.permission === "default") {
                Notification.requestPermission();
            }

            // Page and Sidebar Logic
            const menuToggle = document.getElementById('menuToggle');
            const closeMenu = document.getElementById('closeMenu');
            const sidebar = document.getElementById('sidebar');
            const homeLink = document.getElementById('homeLink');
            const winterForecastLink = document.getElementById('winterForecastLink');
            const autumnForecastLink = document.getElementById('autumnForecastLink');
            const radarLink = document.getElementById('radarLink');
            const winterCountdownLink = document.getElementById('winterCountdownLink');
            const dewPointLink = document.getElementById('dewPointLink');
            const springCountdownLink = document.getElementById('springCountdownLink'); 
            const summerCountdownLink = document.getElementById('summerCountdownLink'); 
            const autumnCountdownLink = document.getElementById('autumnCountdownLink'); 
            const altitudeLink = document.getElementById('altitudeLink');
            const askQuestionLink = document.getElementById('askQuestionLink');
            const adminLink = document.getElementById('adminLink');
            
            const mainWeatherPage = document.getElementById('mainWeatherPage');
            const winterForecastPage = document.getElementById('winterForecastPage');
            const autumnForecastPage = document.getElementById('autumnForecastPage');
            const radarPage = document.getElementById('radarPage');
            const winterCountdownPage = document.getElementById('winterCountdownPage');
            const dewPointPage = document.getElementById('dewPointPage');
            const springCountdownPage = document.getElementById('springCountdownPage'); 
            const summerCountdownPage = document.getElementById('summerCountdownPage'); 
            const autumnCountdownPage = document.getElementById('autumnCountdownPage'); 
            const altitudePage = document.getElementById('altitudePage');
            const askQuestionPage = document.getElementById('askQuestionPage');
            const adminPage = document.getElementById('adminPage');

            const openSidebar = () => sidebar.classList.add('show');
            const closeSidebar = () => sidebar.classList.remove('show');

            function showPage(pageToShow) {
                [mainWeatherPage, winterForecastPage, autumnForecastPage, radarPage, winterCountdownPage, dewPointPage, springCountdownPage, summerCountdownPage, autumnCountdownPage, altitudePage, askQuestionPage, adminPage].forEach(page => { 
                    if(page) page.style.display = 'none';
                });
                if (pageToShow) {
                    pageToShow.style.display = 'block';
                    
                    // Ana sayfaya d√∂n√ºld√ºƒü√ºnde y√∂netici mesajƒ±nƒ± tekrar kontrol et
                    if(pageToShow === mainWeatherPage) {
                        checkFixedAdminAlert();
                    }
                }
                closeSidebar();
            }

            menuToggle.addEventListener('click', (e) => {
                e.stopPropagation();
                openSidebar();
            });

            closeMenu.addEventListener('click', closeSidebar);

            homeLink.addEventListener('click', (e) => {
                e.preventDefault();
                showPage(mainWeatherPage);
            });

            winterForecastLink.addEventListener('click', (e) => {
                e.preventDefault();
                showPage(winterForecastPage);
            });
            
            autumnForecastLink.addEventListener('click', (e) => {
                e.preventDefault();
                showPage(autumnForecastPage);
            });
            
            radarLink.addEventListener('click', (e) => {
                e.preventDefault();
                showPage(radarPage);
            });
            
            winterCountdownLink.addEventListener('click', (e) => {
                e.preventDefault();
                document.getElementById('countdownDisplay').textContent = calculateDaysUntilWinter() + " g√ºn";
                showPage(winterCountdownPage);
            });

            springCountdownLink.addEventListener('click', (e) => {
                e.preventDefault();
                document.getElementById('springCountdownDisplay').textContent = calculateDaysUntilSpring() + " g√ºn";
                showPage(springCountdownPage);
            });

            summerCountdownLink.addEventListener('click', (e) => {
                e.preventDefault();
                document.getElementById('summerCountdownDisplay').textContent = calculateDaysUntilSummer() + " g√ºn";
                showPage(summerCountdownPage);
            });
            
            autumnCountdownLink.addEventListener('click', (e) => {
                e.preventDefault();
                document.getElementById('autumnCountdownDisplay').textContent = calculateDaysUntilAutumn() + " g√ºn";
                showPage(autumnCountdownPage);
            });

            dewPointLink.addEventListener('click', (e) => {
                e.preventDefault();
                showPage(dewPointPage);
                getDewPointByLocation();
            });

            altitudeLink.addEventListener('click', (e) => {
                e.preventDefault();
                showPage(altitudePage);
            });

            askQuestionLink.addEventListener('click', (e) => {
                e.preventDefault();
                showPage(askQuestionPage);
                loadUserQuestions();
            });
            
            // Admin link click event update
            adminLink.addEventListener('click', (e) => {
                e.preventDefault();
                closeSidebar(); // Close sidebar first
                openAdminModal(); // Open custom modal
            });

            document.body.addEventListener('click', (e) => {
                if (sidebar.classList.contains('show') && !sidebar.contains(e.target) && e.target !== menuToggle) {
                    closeSidebar();
                }
            });
        });
    </script>
</body>
</html>
